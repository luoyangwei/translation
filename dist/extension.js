(()=>{var e={346:(e,t,s)=>{"use strict";const{Transform:r,PassThrough:o}=s(781),n=s(796),i=s(511);e.exports=e=>{const t=(e.headers["content-encoding"]||"").toLowerCase();if(!["gzip","deflate","br"].includes(t))return e;const s="br"===t;if(s&&"function"!=typeof n.createBrotliDecompress)return e.destroy(new Error("Brotli is not supported on Node.js < 12")),e;let a=!0;const c=new r({transform(e,t,s){a=!1,s(null,e)},flush(e){e()}}),h=new o({autoDestroy:!1,destroy(t,s){e.destroy(),s(t)}}),l=s?n.createBrotliDecompress():n.createUnzip();return l.once("error",(t=>{!a||e.readable?h.destroy(t):h.end()})),i(e,h),e.pipe(c).pipe(l).pipe(h),h}},511:e=>{"use strict";const t=["aborted","complete","headers","httpVersion","httpVersionMinor","httpVersionMajor","method","rawHeaders","rawTrailers","setTimeout","socket","statusCode","statusMessage","trailers","url"];e.exports=(e,s)=>{if(s._readableState.autoDestroy)throw new Error("The second stream must have the `autoDestroy` option set to `false`");const r=new Set(Object.keys(e).concat(t)),o={};for(const t of r)t in s||(o[t]={get(){const s=e[t];return"function"==typeof s?s.bind(e):s},set(s){e[t]=s},enumerable:!0,configurable:!1});return Object.defineProperties(s,o),e.once("aborted",(()=>{s.destroy(),s.emit("aborted")})),e.once("close",(()=>{e.complete&&s.readable?s.once("end",(()=>{s.emit("close")})):s.emit("close")})),s}},313:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const s=(e,t)=>{let s;s="function"==typeof t?{connect:t}:t;const r="function"==typeof s.connect,o="function"==typeof s.secureConnect,n="function"==typeof s.close,i=()=>{r&&s.connect(),function(e){return e.encrypted}(e)&&o&&(e.authorized?s.secureConnect():e.authorizationError||e.once("secureConnect",s.secureConnect)),n&&e.once("close",s.close)};e.writable&&!e.connecting?i():e.connecting?e.once("connect",i):e.destroyed&&n&&s.close(e._hadError)};t.default=s,e.exports=s,e.exports.default=s},105:(e,t,s)=>{"use strict";const{PassThrough:r}=s(781);e.exports=e=>{e={...e};const{array:t}=e;let{encoding:s}=e;const o="buffer"===s;let n=!1;t?n=!(s||o):s=s||"utf8",o&&(s=null);const i=new r({objectMode:n});s&&i.setEncoding(s);let a=0;const c=[];return i.on("data",(e=>{c.push(e),n?a=c.length:a+=e.length})),i.getBufferedValue=()=>t?c:o?Buffer.concat(c,a):c.join(""),i.getBufferedLength=()=>a,i}},31:(e,t,s)=>{"use strict";const{constants:r}=s(300),o=s(781),{promisify:n}=s(837),i=s(105),a=n(o.pipeline);class c extends Error{constructor(){super("maxBuffer exceeded"),this.name="MaxBufferError"}}async function h(e,t){if(!e)throw new Error("Expected a stream");t={maxBuffer:1/0,...t};const{maxBuffer:s}=t,o=i(t);return await new Promise(((t,n)=>{const i=e=>{e&&o.getBufferedLength()<=r.MAX_LENGTH&&(e.bufferedData=o.getBufferedValue()),n(e)};(async()=>{try{await a(e,o),t()}catch(e){i(e)}})(),o.on("data",(()=>{o.getBufferedLength()>s&&i(new c)}))})),o.getBufferedValue()}e.exports=h,e.exports.buffer=(e,t)=>h(e,{...t,encoding:"buffer"}),e.exports.array=(e,t)=>h(e,{...t,array:!0}),e.exports.MaxBufferError=c},214:e=>{"use strict";const t=new Set([200,203,204,206,300,301,308,404,405,410,414,501]),s=new Set([200,203,204,300,301,302,303,307,308,404,405,410,414,501]),r=new Set([500,502,503,504]),o={date:!0,connection:!0,"keep-alive":!0,"proxy-authenticate":!0,"proxy-authorization":!0,te:!0,trailer:!0,"transfer-encoding":!0,upgrade:!0},n={"content-length":!0,"content-encoding":!0,"transfer-encoding":!0,"content-range":!0};function i(e){const t=parseInt(e,10);return isFinite(t)?t:0}function a(e){const t={};if(!e)return t;const s=e.trim().split(/,/);for(const e of s){const[s,r]=e.split(/=/,2);t[s.trim()]=void 0===r||r.trim().replace(/^"|"$/g,"")}return t}function c(e){let t=[];for(const s in e){const r=e[s];t.push(!0===r?s:s+"="+r)}if(t.length)return t.join(", ")}e.exports=class{constructor(e,t,{shared:s,cacheHeuristic:r,immutableMinTimeToLive:o,ignoreCargoCult:n,_fromObject:i}={}){if(i)this._fromObject(i);else{if(!t||!t.headers)throw Error("Response headers missing");this._assertRequestHasHeaders(e),this._responseTime=this.now(),this._isShared=!1!==s,this._cacheHeuristic=void 0!==r?r:.1,this._immutableMinTtl=void 0!==o?o:864e5,this._status="status"in t?t.status:200,this._resHeaders=t.headers,this._rescc=a(t.headers["cache-control"]),this._method="method"in e?e.method:"GET",this._url=e.url,this._host=e.headers.host,this._noAuthorization=!e.headers.authorization,this._reqHeaders=t.headers.vary?e.headers:null,this._reqcc=a(e.headers["cache-control"]),n&&"pre-check"in this._rescc&&"post-check"in this._rescc&&(delete this._rescc["pre-check"],delete this._rescc["post-check"],delete this._rescc["no-cache"],delete this._rescc["no-store"],delete this._rescc["must-revalidate"],this._resHeaders=Object.assign({},this._resHeaders,{"cache-control":c(this._rescc)}),delete this._resHeaders.expires,delete this._resHeaders.pragma),null==t.headers["cache-control"]&&/no-cache/.test(t.headers.pragma)&&(this._rescc["no-cache"]=!0)}}now(){return Date.now()}storable(){return!(this._reqcc["no-store"]||!("GET"===this._method||"HEAD"===this._method||"POST"===this._method&&this._hasExplicitExpiration())||!s.has(this._status)||this._rescc["no-store"]||this._isShared&&this._rescc.private||this._isShared&&!this._noAuthorization&&!this._allowsStoringAuthenticated()||!(this._resHeaders.expires||this._rescc["max-age"]||this._isShared&&this._rescc["s-maxage"]||this._rescc.public||t.has(this._status)))}_hasExplicitExpiration(){return this._isShared&&this._rescc["s-maxage"]||this._rescc["max-age"]||this._resHeaders.expires}_assertRequestHasHeaders(e){if(!e||!e.headers)throw Error("Request headers missing")}satisfiesWithoutRevalidation(e){this._assertRequestHasHeaders(e);const t=a(e.headers["cache-control"]);return!t["no-cache"]&&!/no-cache/.test(e.headers.pragma)&&(!(t["max-age"]&&this.age()>t["max-age"])&&(!(t["min-fresh"]&&this.timeToLive()<1e3*t["min-fresh"])&&(!(this.stale()&&(!t["max-stale"]||this._rescc["must-revalidate"]||!(!0===t["max-stale"]||t["max-stale"]>this.age()-this.maxAge())))&&this._requestMatches(e,!1))))}_requestMatches(e,t){return(!this._url||this._url===e.url)&&this._host===e.headers.host&&(!e.method||this._method===e.method||t&&"HEAD"===e.method)&&this._varyMatches(e)}_allowsStoringAuthenticated(){return this._rescc["must-revalidate"]||this._rescc.public||this._rescc["s-maxage"]}_varyMatches(e){if(!this._resHeaders.vary)return!0;if("*"===this._resHeaders.vary)return!1;const t=this._resHeaders.vary.trim().toLowerCase().split(/\s*,\s*/);for(const s of t)if(e.headers[s]!==this._reqHeaders[s])return!1;return!0}_copyWithoutHopByHopHeaders(e){const t={};for(const s in e)o[s]||(t[s]=e[s]);if(e.connection){const s=e.connection.trim().split(/\s*,\s*/);for(const e of s)delete t[e]}if(t.warning){const e=t.warning.split(/,/).filter((e=>!/^\s*1[0-9][0-9]/.test(e)));e.length?t.warning=e.join(",").trim():delete t.warning}return t}responseHeaders(){const e=this._copyWithoutHopByHopHeaders(this._resHeaders),t=this.age();return t>86400&&!this._hasExplicitExpiration()&&this.maxAge()>86400&&(e.warning=(e.warning?`${e.warning}, `:"")+'113 - "rfc7234 5.5.4"'),e.age=`${Math.round(t)}`,e.date=new Date(this.now()).toUTCString(),e}date(){const e=Date.parse(this._resHeaders.date);return isFinite(e)?e:this._responseTime}age(){return this._ageValue()+(this.now()-this._responseTime)/1e3}_ageValue(){return i(this._resHeaders.age)}maxAge(){if(!this.storable()||this._rescc["no-cache"])return 0;if(this._isShared&&this._resHeaders["set-cookie"]&&!this._rescc.public&&!this._rescc.immutable)return 0;if("*"===this._resHeaders.vary)return 0;if(this._isShared){if(this._rescc["proxy-revalidate"])return 0;if(this._rescc["s-maxage"])return i(this._rescc["s-maxage"])}if(this._rescc["max-age"])return i(this._rescc["max-age"]);const e=this._rescc.immutable?this._immutableMinTtl:0,t=this.date();if(this._resHeaders.expires){const s=Date.parse(this._resHeaders.expires);return Number.isNaN(s)||s<t?0:Math.max(e,(s-t)/1e3)}if(this._resHeaders["last-modified"]){const s=Date.parse(this._resHeaders["last-modified"]);if(isFinite(s)&&t>s)return Math.max(e,(t-s)/1e3*this._cacheHeuristic)}return e}timeToLive(){const e=this.maxAge()-this.age(),t=e+i(this._rescc["stale-if-error"]),s=e+i(this._rescc["stale-while-revalidate"]);return 1e3*Math.max(0,e,t,s)}stale(){return this.maxAge()<=this.age()}_useStaleIfError(){return this.maxAge()+i(this._rescc["stale-if-error"])>this.age()}useStaleWhileRevalidate(){return this.maxAge()+i(this._rescc["stale-while-revalidate"])>this.age()}static fromObject(e){return new this(void 0,void 0,{_fromObject:e})}_fromObject(e){if(this._responseTime)throw Error("Reinitialized");if(!e||1!==e.v)throw Error("Invalid serialization");this._responseTime=e.t,this._isShared=e.sh,this._cacheHeuristic=e.ch,this._immutableMinTtl=void 0!==e.imm?e.imm:864e5,this._status=e.st,this._resHeaders=e.resh,this._rescc=e.rescc,this._method=e.m,this._url=e.u,this._host=e.h,this._noAuthorization=e.a,this._reqHeaders=e.reqh,this._reqcc=e.reqcc}toObject(){return{v:1,t:this._responseTime,sh:this._isShared,ch:this._cacheHeuristic,imm:this._immutableMinTtl,st:this._status,resh:this._resHeaders,rescc:this._rescc,m:this._method,u:this._url,h:this._host,a:this._noAuthorization,reqh:this._reqHeaders,reqcc:this._reqcc}}revalidationHeaders(e){this._assertRequestHasHeaders(e);const t=this._copyWithoutHopByHopHeaders(e.headers);if(delete t["if-range"],!this._requestMatches(e,!0)||!this.storable())return delete t["if-none-match"],delete t["if-modified-since"],t;if(this._resHeaders.etag&&(t["if-none-match"]=t["if-none-match"]?`${t["if-none-match"]}, ${this._resHeaders.etag}`:this._resHeaders.etag),t["accept-ranges"]||t["if-match"]||t["if-unmodified-since"]||this._method&&"GET"!=this._method){if(delete t["if-modified-since"],t["if-none-match"]){const e=t["if-none-match"].split(/,/).filter((e=>!/^\s*W\//.test(e)));e.length?t["if-none-match"]=e.join(",").trim():delete t["if-none-match"]}}else this._resHeaders["last-modified"]&&!t["if-modified-since"]&&(t["if-modified-since"]=this._resHeaders["last-modified"]);return t}revalidatedPolicy(e,t){if(this._assertRequestHasHeaders(e),this._useStaleIfError()&&function(e){return!e||r.has(e.status)}(t))return{modified:!1,matches:!1,policy:this};if(!t||!t.headers)throw Error("Response headers missing");let s=!1;if(void 0!==t.status&&304!=t.status?s=!1:t.headers.etag&&!/^\s*W\//.test(t.headers.etag)?s=this._resHeaders.etag&&this._resHeaders.etag.replace(/^\s*W\//,"")===t.headers.etag:this._resHeaders.etag&&t.headers.etag?s=this._resHeaders.etag.replace(/^\s*W\//,"")===t.headers.etag.replace(/^\s*W\//,""):this._resHeaders["last-modified"]?s=this._resHeaders["last-modified"]===t.headers["last-modified"]:this._resHeaders.etag||this._resHeaders["last-modified"]||t.headers.etag||t.headers["last-modified"]||(s=!0),!s)return{policy:new this.constructor(e,t),modified:304!=t.status,matches:!1};const o={};for(const e in this._resHeaders)o[e]=e in t.headers&&!n[e]?t.headers[e]:this._resHeaders[e];const i=Object.assign({},t,{status:this._status,method:this._method,headers:o});return{policy:new this.constructor(e,i,{shared:this._isShared,cacheHeuristic:this._cacheHeuristic,immutableMinTimeToLive:this._immutableMinTtl}),modified:!1,matches:!0}}}},685:(e,t,s)=>{"use strict";const{URL:r}=s(310),o=s(361),n=s(404),i=s(158),a=s(269),c=s(120),h=Symbol("currentStreamCount"),l=Symbol("request"),u=Symbol("cachedOriginSet"),d=Symbol("gracefullyClosing"),p=Symbol("length"),f=["createConnection","maxDeflateDynamicTableSize","maxSettings","maxSessionMemory","maxHeaderListPairs","maxOutstandingPings","maxReservedRemoteStreams","maxSendHeaderBlockLength","paddingStrategy","peerMaxConcurrentStreams","settings","family","localAddress","rejectUnauthorized","pskCallback","minDHSize","path","socket","ca","cert","sigalgs","ciphers","clientCertEngine","crl","dhparam","ecdhCurve","honorCipherOrder","key","privateKeyEngine","privateKeyIdentifier","maxVersion","minVersion","pfx","secureOptions","secureProtocol","sessionIdContext","ticketKeys"],m=(e,t)=>e.remoteSettings.maxConcurrentStreams>t.remoteSettings.maxConcurrentStreams,y=(e,t)=>{for(let s=0;s<e.length;s++){const r=e[s];r[u].length>0&&r[u].length<t[u].length&&r[u].every((e=>t[u].includes(e)))&&r[h]+t[h]<=t.remoteSettings.maxConcurrentStreams&&b(r)}},g=(e,t)=>{for(let s=0;s<e.length;s++){const r=e[s];if(t[u].length>0&&t[u].length<r[u].length&&t[u].every((e=>r[u].includes(e)))&&t[h]+r[h]<=r.remoteSettings.maxConcurrentStreams)return b(t),!0}return!1},b=e=>{e[d]=!0,0===e[h]&&e.close()};class _ extends o{constructor({timeout:e=0,maxSessions:t=Number.POSITIVE_INFINITY,maxEmptySessions:s=10,maxCachedTlsSessions:r=100}={}){super(),this.sessions={},this.queue={},this.timeout=e,this.maxSessions=t,this.maxEmptySessions=s,this._emptySessionCount=0,this._sessionCount=0,this.settings={enablePush:!1,initialWindowSize:33554432},this.tlsSessionCache=new a({maxSize:r})}get protocol(){return"https:"}normalizeOptions(e){let t="";for(let s=0;s<f.length;s++){const r=f[s];t+=":",e&&void 0!==e[r]&&(t+=e[r])}return t}_processQueue(){if(this._sessionCount>=this.maxSessions)this.closeEmptySessions(this.maxSessions-this._sessionCount+1);else for(const e in this.queue)for(const t in this.queue[e]){const s=this.queue[e][t];s.completed||(s.completed=!0,s())}}_isBetterSession(e,t){return e>t}_accept(e,t,s,r){let o=0;for(;o<t.length&&e[h]<e.remoteSettings.maxConcurrentStreams;)t[o].resolve(e),o++;t.splice(0,o),t.length>0&&(this.getSession(s,r,t),t.length=0)}getSession(e,t,s){return new Promise(((o,n)=>{Array.isArray(s)&&s.length>0?(s=[...s],o()):s=[{resolve:o,reject:n}];try{if("string"==typeof e)e=new r(e);else if(!(e instanceof r))throw new TypeError("The `origin` argument needs to be a string or an URL object");if(t){const{servername:s}=t,{hostname:r}=e;if(s&&r!==s)throw new Error(`Origin ${r} differs from servername ${s}`)}}catch(e){for(let t=0;t<s.length;t++)s[t].reject(e);return}const a=this.normalizeOptions(t),c=e.origin;if(a in this.sessions){const e=this.sessions[a];let r,o=-1,n=-1;for(let t=0;t<e.length;t++){const s=e[t],i=s.remoteSettings.maxConcurrentStreams;if(i<o)break;if(!s[u].includes(c))continue;const a=s[h];a>=i||s[d]||s.destroyed||(r||(o=i),this._isBetterSession(a,n)&&(r=s,n=a))}if(r)return void this._accept(r,s,c,t)}if(a in this.queue){if(c in this.queue[a])return void this.queue[a][c].listeners.push(...s)}else this.queue[a]={[p]:0};const f=()=>{a in this.queue&&this.queue[a][c]===b&&(delete this.queue[a][c],0==--this.queue[a][p]&&delete this.queue[a])},b=async()=>{this._sessionCount++;const r=`${c}:${a}`;let o,n=!1;try{const _={...t};void 0===_.settings&&(_.settings=this.settings),void 0===_.session&&(_.session=this.tlsSessionCache.get(r));const w=_.createConnection||this.createConnection;o=await w.call(this,e,_),_.createConnection=()=>o;const v=i.connect(e,_);v[h]=0,v[d]=!1;const E=()=>{const{socket:e}=v;let t;return!1===e.servername?(e.servername=e.remoteAddress,t=v.originSet,e.servername=!1):t=v.originSet,t},S=()=>v[h]<v.remoteSettings.maxConcurrentStreams;v.socket.once("session",(e=>{this.tlsSessionCache.set(r,e)})),v.once("error",(e=>{for(let t=0;t<s.length;t++)s[t].reject(e);this.tlsSessionCache.delete(r)})),v.setTimeout(this.timeout,(()=>{v.destroy()})),v.once("close",(()=>{if(this._sessionCount--,n){this._emptySessionCount--;const e=this.sessions[a];1===e.length?delete this.sessions[a]:e.splice(e.indexOf(v),1)}else{f();const e=new Error("Session closed without receiving a SETTINGS frame");e.code="HTTP2WRAPPER_NOSETTINGS";for(let t=0;t<s.length;t++)s[t].reject(e)}this._processQueue()}));const x=()=>{const e=this.queue[a];if(!e)return;const t=v[u];for(let s=0;s<t.length;s++){const r=t[s];if(r in e){const{listeners:t,completed:s}=e[r];let o=0;for(;o<t.length&&S();)t[o].resolve(v),o++;if(e[r].listeners.splice(0,o),0===e[r].listeners.length&&!s&&(delete e[r],0==--e[p])){delete this.queue[a];break}if(!S())break}}};v.on("origin",(()=>{v[u]=E()||[],v[d]=!1,g(this.sessions[a],v),!v[d]&&S()&&(x(),S()&&y(this.sessions[a],v))})),v.once("remoteSettings",(()=>{if(b.destroyed){const e=new Error("Agent has been destroyed");for(let t=0;t<s.length;t++)s[t].reject(e);v.destroy()}else{if(v.setLocalWindowSize&&v.setLocalWindowSize(4194304),v[u]=E()||[],v.socket.encrypted){const e=v[u][0];if(e!==c){const t=new Error(`Requested origin ${c} does not match server ${e}`);for(let e=0;e<s.length;e++)s[e].reject(t);return void v.destroy()}}f();{const e=this.sessions;if(a in e){const t=e[a];t.splice(((e,t,s)=>{let r=0,o=e.length;for(;r<o;){const n=r+o>>>1;s(e[n],t)?r=n+1:o=n}return r})(t,v,m),0,v)}else e[a]=[v]}n=!0,this._emptySessionCount++,this.emit("session",v),this._accept(v,s,c,t),0===v[h]&&this._emptySessionCount>this.maxEmptySessions&&this.closeEmptySessions(this._emptySessionCount-this.maxEmptySessions),v.on("remoteSettings",(()=>{S()&&(x(),S()&&y(this.sessions[a],v))}))}})),v[l]=v.request,v.request=(e,t)=>{if(v[d])throw new Error("The session is gracefully closing. No new streams are allowed.");const s=v[l](e,t);return v.ref(),0==v[h]++&&this._emptySessionCount--,s.once("close",(()=>{0==--v[h]&&(this._emptySessionCount++,v.unref(),this._emptySessionCount>this.maxEmptySessions||v[d])?v.close():v.destroyed||v.closed||S()&&!g(this.sessions[a],v)&&(y(this.sessions[a],v),x(),0===v[h]&&this._processQueue())})),s}}catch(e){f(),this._sessionCount--;for(let t=0;t<s.length;t++)s[t].reject(e)}};b.listeners=s,b.completed=!1,b.destroyed=!1,this.queue[a][c]=b,this.queue[a][p]++,this._processQueue()}))}request(e,t,s,r){return new Promise(((o,n)=>{this.getSession(e,t,[{reject:n,resolve:e=>{try{const t=e.request(s,r);c(t),o(t)}catch(e){n(e)}}}])}))}async createConnection(e,t){return _.connect(e,t)}static connect(e,t){t.ALPNProtocols=["h2"];const s=e.port||443,r=e.hostname;void 0===t.servername&&(t.servername=r);const o=n.connect(s,r,t);return t.socket&&(o._peername={family:void 0,address:void 0,port:s}),o}closeEmptySessions(e=Number.POSITIVE_INFINITY){let t=0;const{sessions:s}=this;for(const r in s){const o=s[r];for(let s=0;s<o.length;s++){const r=o[s];if(0===r[h]&&(t++,r.close(),t>=e))return t}}return t}destroy(e){const{sessions:t,queue:s}=this;for(const s in t){const r=t[s];for(let t=0;t<r.length;t++)r[t].destroy(e)}for(const e in s){const t=s[e];for(const e in t)t[e].destroyed=!0}this.queue={},this.tlsSessionCache.clear()}get emptySessionCount(){return this._emptySessionCount}get pendingSessionCount(){return this._sessionCount-this._emptySessionCount}get sessionCount(){return this._sessionCount}}_.kCurrentStreamCount=h,_.kGracefullyClosing=d,e.exports={Agent:_,globalAgent:new _}},673:(e,t,s)=>{"use strict";const{URL:r,urlToHttpOptions:o}=s(310),n=s(181),i=s(687),a=s(322),c=s(269),{Agent:h,globalAgent:l}=s(685),u=s(287),d=s(17),p=s(120),f=new c({maxSize:100}),m=(e,t=new Map,s=undefined)=>async r=>{const o=`${r.host}:${r.port}:${r.ALPNProtocols.sort()}`;if(!e.has(o)){if(t.has(o))return{alpnProtocol:(await t.get(o)).alpnProtocol};const{path:n}=r;r.path=r.socketPath;const i=a(r,s);t.set(o,i);try{const s=await i;return e.set(o,s.alpnProtocol),t.delete(o),r.path=n,s}catch(e){throw t.delete(o),r.path=n,e}}return{alpnProtocol:e.get(o)}},y=m(f,new Map);e.exports=async(e,t,s)=>{if(e="string"==typeof e?o(new r(e)):e instanceof r?o(e):{...e},"function"==typeof t||void 0===t?(s=t,t=e):t=Object.assign(e,t),t.ALPNProtocols=t.ALPNProtocols||["h2","http/1.1"],!Array.isArray(t.ALPNProtocols)||0===t.ALPNProtocols.length)throw new Error("The `ALPNProtocols` option must be an Array with at least one entry");t.protocol=t.protocol||"https:";const a="https:"===t.protocol;t.host=t.hostname||t.host||"localhost",t.session=t.tlsSession,t.servername=t.servername||d(t.headers&&t.headers.host||t.host),t.port=t.port||(a?443:80),t._defaultAgent=a?i.globalAgent:n.globalAgent;const c=t.resolveProtocol||y;let{agent:f}=t;if(void 0!==f&&!1!==f&&"Object"!==f.constructor.name)throw new Error("The `options.agent` can be only an object `http`, `https` or `http2` properties");if(a){t.resolveSocket=!0;let{socket:e,alpnProtocol:r,timeout:o}=await c(t);if(o){e&&e.destroy();const s=new Error(`Timed out resolving ALPN: ${t.timeout} ms`);throw s.code="ETIMEDOUT",s.ms=t.timeout,s}e&&t.createConnection&&(e.destroy(),e=void 0),delete t.resolveSocket;const n="h2"===r;if(f&&(f=n?f.http2:f.https,t.agent=f),void 0===f&&(f=n?l:i.globalAgent),e)if(!1===f)e.destroy();else{const s=(n?h:i.Agent).prototype.createConnection;f.createConnection===s?n?t._reuseSocket=e:((e,t,s)=>{t._httpMessage={shouldKeepAlive:!0};const r=()=>{e.emit("free",t,s)};t.on("free",r);const o=()=>{e.removeSocket(t,s)};t.on("close",o);const n=()=>{const{freeSockets:s}=e;for(const e of Object.values(s))if(e.includes(t))return void t.destroy()};t.on("timeout",n);const i=()=>{e.removeSocket(t,s),t.off("close",o),t.off("free",r),t.off("timeout",n),t.off("agentRemove",i)};t.on("agentRemove",i),e.emit("free",t,s)})(f,e,t):e.destroy()}if(n)return p(new u(t,s))}else f&&(t.agent=f.http);return p(n.request(t,s))},e.exports.protocolCache=f,e.exports.resolveProtocol=y,e.exports.createResolveProtocol=m},287:(e,t,s)=>{"use strict";const{URL:r,urlToHttpOptions:o}=s(310),n=s(158),{Writable:i}=s(781),{Agent:a,globalAgent:c}=s(685),h=s(138),l=s(306),{ERR_INVALID_ARG_TYPE:u,ERR_INVALID_PROTOCOL:d,ERR_HTTP_HEADERS_SENT:p}=s(190),f=s(460),m=s(154),y=s(709),{HTTP2_HEADER_STATUS:g,HTTP2_HEADER_METHOD:b,HTTP2_HEADER_PATH:_,HTTP2_HEADER_AUTHORITY:w,HTTP2_METHOD_CONNECT:v}=n.constants,E=Symbol("headers"),S=Symbol("origin"),x=Symbol("session"),O=Symbol("options"),k=Symbol("flushedHeaders"),T=Symbol("jobs"),P=Symbol("pendingAgentPromise");e.exports=class extends i{constructor(e,t,s){if(super({autoDestroy:!1,emitClose:!1}),e="string"==typeof e?o(new r(e)):e instanceof r?o(e):{...e},"function"==typeof t||void 0===t?(s=t,t=e):t=Object.assign(e,t),t.h2session){if(this[x]=t.h2session,this[x].destroyed)throw new Error("The session has been closed already");this.protocol=this[x].socket.encrypted?"https:":"http:"}else if(!1===t.agent)this.agent=new a({maxEmptySessions:0});else if(void 0===t.agent||null===t.agent)this.agent=c;else{if("function"!=typeof t.agent.request)throw new u("options.agent",["http2wrapper.Agent-like Object","undefined","false"],t.agent);this.agent=t.agent}if(this.agent&&(this.protocol=this.agent.protocol),t.protocol&&t.protocol!==this.protocol)throw new d(t.protocol,this.protocol);t.port||(t.port=t.defaultPort||this.agent&&this.agent.defaultPort||443),t.host=t.hostname||t.host||"localhost",delete t.hostname;const{timeout:n}=t;t.timeout=void 0,this[E]=Object.create(null),this[T]=[],this[P]=void 0,this.socket=null,this.connection=null,this.method=t.method||"GET",("CONNECT"!==this.method||"/"!==t.path&&void 0!==t.path)&&(this.path=t.path),this.res=null,this.aborted=!1,this.reusedSocket=!1;const{headers:i}=t;if(i)for(const e in i)this.setHeader(e,i[e]);t.auth&&!("authorization"in this[E])&&(this[E].authorization="Basic "+Buffer.from(t.auth).toString("base64")),t.session=t.tlsSession,t.path=t.socketPath,this[O]=t,this[S]=new r(`${this.protocol}//${t.servername||t.host}:${t.port}`);const h=t._reuseSocket;h&&(t.createConnection=(...e)=>h.destroyed?this.agent.createConnection(...e):h,this.agent.getSession(this[S],this[O]).catch((()=>{}))),n&&this.setTimeout(n),s&&this.once("response",s),this[k]=!1}get method(){return this[E][b]}set method(e){e&&(this[E][b]=e.toUpperCase())}get path(){const e="CONNECT"===this.method?w:_;return this[E][e]}set path(e){if(e){const t="CONNECT"===this.method?w:_;this[E][t]=e}}get host(){return this[S].hostname}set host(e){}get _mustNotHaveABody(){return"GET"===this.method||"HEAD"===this.method||"DELETE"===this.method}_write(e,t,s){if(this._mustNotHaveABody)return void s(new Error("The GET, HEAD and DELETE methods must NOT have a body"));this.flushHeaders();const r=()=>this._request.write(e,t,s);this._request?r():this[T].push(r)}_final(e){this.flushHeaders();const t=()=>{this._mustNotHaveABody||"CONNECT"===this.method?e():this._request.end(e)};this._request?t():this[T].push(t)}abort(){this.res&&this.res.complete||(this.aborted||process.nextTick((()=>this.emit("abort"))),this.aborted=!0,this.destroy())}async _destroy(e,t){this.res&&this.res._dump(),this._request?this._request.destroy():process.nextTick((()=>{this.emit("close")}));try{await this[P]}catch(t){this.aborted&&(e=t)}t(e)}async flushHeaders(){if(this[k]||this.destroyed)return;this[k]=!0;const e=this.method===v,t=t=>{if(this._request=t,this.destroyed)return void t.destroy();e||l(t,this,["timeout","continue"]),t.once("error",(e=>{this.destroy(e)})),t.once("aborted",(()=>{const{res:e}=this;e?(e.aborted=!0,e.emit("aborted"),e.destroy()):this.destroy(new Error("The server aborted the HTTP/2 stream"))}));const s=(s,r,o)=>{const n=new h(this.socket,t.readableHighWaterMark);this.res=n,n.url=`${this[S].origin}${this.path}`,n.req=this,n.statusCode=s[g],n.headers=s,n.rawHeaders=o,n.once("end",(()=>{n.complete=!0,n.socket=null,n.connection=null})),e?(n.upgrade=!0,this.emit("connect",n,t,Buffer.alloc(0))?this.emit("close"):t.destroy()):(t.on("data",(e=>{n._dumped||n.push(e)||t.pause()})),t.once("end",(()=>{this.aborted||n.push(null)})),this.emit("response",n)||n._dump())};t.once("response",s),t.once("headers",(e=>this.emit("information",{statusCode:e[g]}))),t.once("trailers",((e,t,r)=>{const{res:o}=this;null!==o?(o.trailers=e,o.rawTrailers=r):s(e,0,r)})),t.once("close",(()=>{const{aborted:e,res:t}=this;if(t){e&&(t.aborted=!0,t.emit("aborted"),t.destroy());const s=()=>{t.emit("close"),this.destroy(),this.emit("close")};t.readable?t.once("end",s):s()}else{if(!this.destroyed)return this.destroy(new Error("The HTTP/2 stream has been early terminated")),void this.emit("close");this.destroy(),this.emit("close")}})),this.socket=new Proxy(t,y);for(const e of this[T])e();this[T].length=0,this.emit("socket",this.socket)};if(w in this[E]||e||(this[E][w]=this[S].host),this[x])try{t(this[x].request(this[E]))}catch(e){this.destroy(e)}else{this.reusedSocket=!0;try{const e=this.agent.request(this[S],this[O],this[E]);this[P]=e,t(await e),this[P]=!1}catch(e){this[P]=!1,this.destroy(e)}}}get connection(){return this.socket}set connection(e){this.socket=e}getHeaderNames(){return Object.keys(this[E])}hasHeader(e){if("string"!=typeof e)throw new u("name","string",e);return Boolean(this[E][e.toLowerCase()])}getHeader(e){if("string"!=typeof e)throw new u("name","string",e);return this[E][e.toLowerCase()]}get headersSent(){return this[k]}removeHeader(e){if("string"!=typeof e)throw new u("name","string",e);if(this.headersSent)throw new p("remove");delete this[E][e.toLowerCase()]}setHeader(e,t){if(this.headersSent)throw new p("set");f(e),m(e,t);const s=e.toLowerCase();if("connection"===s){if("keep-alive"===t.toLowerCase())return;throw new Error(`Invalid 'connection' header: ${t}`)}"host"===s&&"CONNECT"===this.method?this[E][w]=t:this[E][s]=t}setNoDelay(){}setSocketKeepAlive(){}setTimeout(e,t){const s=()=>this._request.setTimeout(e,t);return this._request?s():this[T].push(s),this}get maxHeadersCount(){if(!this.destroyed&&this._request)return this._request.session.localSettings.maxHeaderListSize}set maxHeadersCount(e){}}},138:(e,t,s)=>{"use strict";const{Readable:r}=s(781);e.exports=class extends r{constructor(e,t){super({emitClose:!1,autoDestroy:!0,highWaterMark:t}),this.statusCode=null,this.statusMessage="",this.httpVersion="2.0",this.httpVersionMajor=2,this.httpVersionMinor=0,this.headers={},this.trailers={},this.req=null,this.aborted=!1,this.complete=!1,this.upgrade=null,this.rawHeaders=[],this.rawTrailers=[],this.socket=e,this._dumped=!1}get connection(){return this.socket}set connection(e){this.socket=e}_destroy(e,t){this.readableEnded||(this.aborted=!0),t(),this.req._request.destroy(e)}setTimeout(e,t){return this.req.setTimeout(e,t),this}_dump(){this._dumped||(this._dumped=!0,this.removeAllListeners("data"),this.resume())}_read(){this.req&&this.req._request.resume()}}},758:(e,t,s)=>{"use strict";const r=s(158),{Agent:o,globalAgent:n}=s(685),i=s(287),a=s(138),c=s(673),{HttpOverHttp2:h,HttpsOverHttp2:l}=s(72),u=s(672),{Http2OverHttp:d,Http2OverHttps:p}=s(148),f=s(460),m=s(154);e.exports={...r,ClientRequest:i,IncomingMessage:a,Agent:o,globalAgent:n,request:(e,t,s)=>new i(e,t,s),get:(e,t,s)=>{const r=new i(e,t,s);return r.end(),r},auto:c,proxies:{HttpOverHttp2:h,HttpsOverHttp2:l,Http2OverHttp2:u,Http2OverHttp:d,Http2OverHttps:p},validateHeaderName:f,validateHeaderValue:m}},476:e=>{"use strict";e.exports=e=>{const{username:t,password:s}=e.proxyOptions.url;if(t||s){const e=`${t}:${s}`,r=`Basic ${Buffer.from(e).toString("base64")}`;return{"proxy-authorization":r,authorization:r}}return{}}},72:(e,t,s)=>{"use strict";const r=s(404),o=s(181),n=s(687),i=s(583),{globalAgent:a}=s(685),c=s(906),h=s(645),l=s(476),u=(e,t,s)=>{(async()=>{try{const{proxyOptions:o}=e,{url:h,headers:u,raw:d}=o,p=await a.request(h,o,{...l(e),...u,":method":"CONNECT",":authority":`${t.host}:${t.port}`});p.once("error",s),p.once("response",(o=>{const a=o[":status"];if(200!==a)return void s(new c(a,""));const h=e instanceof n.Agent;if(d&&h){t.socket=p;const e=r.connect(t);return e.once("close",(()=>{p.destroy()})),void s(null,e)}const l=new i(p);l.encrypted=!1,l._handle.getpeername=e=>{e.family=void 0,e.address=void 0,e.port=void 0},s(null,l)}))}catch(e){s(e)}})()};class d extends o.Agent{constructor(e){super(e),h(this,e.proxyOptions)}createConnection(e,t){u(this,e,t)}}class p extends n.Agent{constructor(e){super(e),h(this,e.proxyOptions)}createConnection(e,t){u(this,e,t)}}e.exports={HttpOverHttp2:d,HttpsOverHttp2:p}},148:(e,t,s)=>{"use strict";const r=s(181),o=s(687),n=s(193),i=s(476);class a extends n{async _getProxyStream(e){const{proxyOptions:t}=this,{url:s,headers:n}=this.proxyOptions;return a=("https:"===s.protocol?o:r).request({...t,hostname:s.hostname,port:s.port,path:e,headers:{...i(this),...n,host:e},method:"CONNECT"}).end(),new Promise(((e,t)=>{a.once("error",t),a.once("connect",((s,r,o)=>{r.unshift(o),a.off("error",t),e([r,s.statusCode,s.statusMessage])}))}));var a}}e.exports={Http2OverHttp:a,Http2OverHttps:a}},672:(e,t,s)=>{"use strict";const{globalAgent:r}=s(685),o=s(193),n=s(476);e.exports=class extends o{async _getProxyStream(e){const{proxyOptions:t}=this,s={...n(this),...t.headers,":method":"CONNECT",":authority":e},o=await r.request(t.url,t,s),i=await(e=>new Promise(((t,s)=>{e.once("error",s),e.once("response",(r=>{e.off("error",s),t(r[":status"])}))})))(o);return[o,i,""]}}},193:(e,t,s)=>{"use strict";const{Agent:r}=s(685),o=s(583),n=s(906),i=s(645);e.exports=class extends r{constructor(e){super(e),i(this,e.proxyOptions)}async createConnection(e,t){const s=`${e.hostname}:${e.port||443}`,[r,i,a]=await this._getProxyStream(s);if(200!==i)throw new n(i,a);if(!this.proxyOptions.raw){const e=new o(r);return e.encrypted=!1,e._handle.getpeername=e=>{e.family=void 0,e.address=void 0,e.port=void 0},e}return t.socket=r,super.createConnection(e,t)}}},645:(e,t,s)=>{"use strict";const{URL:r}=s(310),o=s(58);e.exports=(e,t)=>{o("proxyOptions",t,["object"]),o("proxyOptions.headers",t.headers,["object","undefined"]),o("proxyOptions.raw",t.raw,["boolean","undefined"]),o("proxyOptions.url",t.url,[r,"string"]);const s=new r(t.url);e.proxyOptions={raw:!0,...t,headers:{...t.headers},url:s}}},906:e=>{"use strict";class t extends Error{constructor(e,t=""){super(`The proxy server rejected the request with status code ${e} (${t||"empty status message"})`),this.statusCode=e,this.statusMessage=t}}e.exports=t},17:(e,t,s)=>{"use strict";const{isIP:r}=s(808),o=s(491);e.exports=e=>{const t=(e=>{if("["===e[0]){const t=e.indexOf("]");return o(-1!==t),e.slice(1,t)}const t=e.indexOf(":");return-1===t?e:e.slice(0,t)})(e);return r(t)?"":t}},58:e=>{"use strict";e.exports=(e,t,s)=>{if(!s.some((e=>"string"==typeof e?typeof t===e:t instanceof e))){const r=s.map((e=>"string"==typeof e?e:e.name));throw new TypeError(`Expected '${e}' to be a type of ${r.join(" or ")}, got ${typeof t}`)}}},120:e=>{"use strict";e.exports=e=>{if(0!==e.listenerCount("error"))return e;e.__destroy=e._destroy,e._destroy=(...t)=>{const s=t.pop();e.__destroy(...t,(async e=>{await Promise.resolve(),s(e)}))};const t=t=>{Promise.resolve().then((()=>{e.emit("error",t)}))};return e.once("error",t),Promise.resolve().then((()=>{e.off("error",t)})),e}},190:e=>{"use strict";const t=(t,s,r)=>{e.exports[s]=class extends t{constructor(...e){super("string"==typeof r?r:r(e)),this.name=`${super.name} [${s}]`,this.code=s}}};t(TypeError,"ERR_INVALID_ARG_TYPE",(e=>{const t=e[0].includes(".")?"property":"argument";let s=e[1];const r=Array.isArray(s);return r&&(s=`${s.slice(0,-1).join(", ")} or ${s.slice(-1)}`),`The "${e[0]}" ${t} must be ${r?"one of":"of"} type ${s}. Received ${typeof e[2]}`})),t(TypeError,"ERR_INVALID_PROTOCOL",(e=>`Protocol "${e[0]}" not supported. Expected "${e[1]}"`)),t(Error,"ERR_HTTP_HEADERS_SENT",(e=>`Cannot ${e[0]} headers after they are sent to the client`)),t(TypeError,"ERR_INVALID_HTTP_TOKEN",(e=>`${e[0]} must be a valid HTTP token [${e[1]}]`)),t(TypeError,"ERR_HTTP_INVALID_HEADER_VALUE",(e=>`Invalid value "${e[0]} for header "${e[1]}"`)),t(TypeError,"ERR_INVALID_CHAR",(e=>`Invalid character in ${e[0]} [${e[1]}]`)),t(Error,"ERR_HTTP2_NO_SOCKET_MANIPULATION","HTTP/2 sockets should not be directly manipulated (e.g. read and written)")},202:e=>{"use strict";e.exports=e=>{switch(e){case":method":case":scheme":case":authority":case":path":return!0;default:return!1}}},583:(e,t,s)=>{"use strict";const r=s(781),o=new(s(404).TLSSocket)(new r.PassThrough)._handle._parentWrap.constructor;e.exports=o},306:e=>{"use strict";e.exports=(e,t,s)=>{for(const r of s)e.on(r,((...e)=>t.emit(r,...e)))}},709:(e,t,s)=>{"use strict";const{ERR_HTTP2_NO_SOCKET_MANIPULATION:r}=s(190),o={has(e,t){const s=void 0===e.session?e:e.session.socket;return t in e||t in s},get(e,t){switch(t){case"on":case"once":case"end":case"emit":case"destroy":return e[t].bind(e);case"writable":case"destroyed":return e[t];case"readable":return!e.destroyed&&e.readable;case"setTimeout":{const{session:t}=e;return void 0!==t?t.setTimeout.bind(t):e.setTimeout.bind(e)}case"write":case"read":case"pause":case"resume":throw new r;default:{const s=void 0===e.session?e:e.session.socket,r=s[t];return"function"==typeof r?r.bind(s):r}}},getPrototypeOf:e=>void 0!==e.session?Reflect.getPrototypeOf(e.session.socket):Reflect.getPrototypeOf(e),set(e,t,s){switch(t){case"writable":case"readable":case"destroyed":case"on":case"once":case"end":case"emit":case"destroy":return e[t]=s,!0;case"setTimeout":{const{session:t}=e;return void 0===t?e.setTimeout=s:t.setTimeout=s,!0}case"write":case"read":case"pause":case"resume":throw new r;default:return(void 0===e.session?e:e.session.socket)[t]=s,!0}}};e.exports=o},460:(e,t,s)=>{"use strict";const{ERR_INVALID_HTTP_TOKEN:r}=s(190),o=s(202),n=/^[\^`\-\w!#$%&*+.|~]+$/;e.exports=e=>{if("string"!=typeof e||!n.test(e)&&!o(e))throw new r("Header name",e)}},154:(e,t,s)=>{"use strict";const{ERR_HTTP_INVALID_HEADER_VALUE:r,ERR_INVALID_CHAR:o}=s(190),n=/[^\t\u0020-\u007E\u0080-\u00FF]/;e.exports=(e,t)=>{if(void 0===t)throw new r(t,e);if(n.test(t))throw new o("header content",e)}},85:(e,t)=>{t.stringify=function e(t){if(void 0===t)return t;if(t&&Buffer.isBuffer(t))return JSON.stringify(":base64:"+t.toString("base64"));if(t&&t.toJSON&&(t=t.toJSON()),t&&"object"==typeof t){var s="",r=Array.isArray(t);s=r?"[":"{";var o=!0;for(var n in t){var i="function"==typeof t[n]||!r&&void 0===t[n];Object.hasOwnProperty.call(t,n)&&!i&&(o||(s+=","),o=!1,r?null==t[n]?s+="null":s+=e(t[n]):void 0!==t[n]&&(s+=e(n)+":"+e(t[n])))}return s+(r?"]":"}")}return"string"==typeof t?JSON.stringify(/^:/.test(t)?":"+t:t):void 0===t?"null":JSON.stringify(t)},t.parse=function(e){return JSON.parse(e,(function(e,t){return"string"==typeof t?/^:base64:/.test(t)?Buffer.from(t.substring(8),"base64"):/^:/.test(t)?t.substring(1):t:t}))}},958:(e,t,s)=>{"use strict";const r=s(361),o=s(85),n=["sqlite","postgres","mysql","mongo","redis","tiered"];e.exports=class extends r{constructor(e,{emitErrors:t=!0,...r}={}){if(super(),this.opts={namespace:"keyv",serialize:o.stringify,deserialize:o.parse,..."string"==typeof e?{uri:e}:e,...r},!this.opts.store){const e={...this.opts};this.opts.store=(e=>{const t={redis:"@keyv/redis",rediss:"@keyv/redis",mongodb:"@keyv/mongo",mongo:"@keyv/mongo",sqlite:"@keyv/sqlite",postgresql:"@keyv/postgres",postgres:"@keyv/postgres",mysql:"@keyv/mysql",etcd:"@keyv/etcd",offline:"@keyv/offline",tiered:"@keyv/tiered"};if(e.adapter||e.uri){const r=e.adapter||/^[^:+]*/.exec(e.uri)[0];return new(s(196)(t[r]))(e)}return new Map})(e)}if(this.opts.compression){const e=this.opts.compression;this.opts.serialize=e.serialize.bind(e),this.opts.deserialize=e.deserialize.bind(e)}"function"==typeof this.opts.store.on&&t&&this.opts.store.on("error",(e=>this.emit("error",e))),this.opts.store.namespace=this.opts.namespace;const n=e=>async function*(){for await(const[t,s]of"function"==typeof e?e(this.opts.store.namespace):e){const e=this.opts.deserialize(s);this.opts.store.namespace&&!t.includes(this.opts.store.namespace)||("number"==typeof e.expires&&Date.now()>e.expires?this.delete(t):yield[this._getKeyUnprefix(t),e.value])}};"function"==typeof this.opts.store[Symbol.iterator]&&this.opts.store instanceof Map?this.iterator=n(this.opts.store):"function"==typeof this.opts.store.iterator&&this.opts.store.opts&&this._checkIterableAdaptar()&&(this.iterator=n(this.opts.store.iterator.bind(this.opts.store)))}_checkIterableAdaptar(){return n.includes(this.opts.store.opts.dialect)||n.findIndex((e=>this.opts.store.opts.url.includes(e)))>=0}_getKeyPrefix(e){return`${this.opts.namespace}:${e}`}_getKeyPrefixArray(e){return e.map((e=>`${this.opts.namespace}:${e}`))}_getKeyUnprefix(e){return e.split(":").splice(1).join(":")}get(e,t){const{store:s}=this.opts,r=Array.isArray(e),o=r?this._getKeyPrefixArray(e):this._getKeyPrefix(e);if(r&&void 0===s.getMany){const e=[];for(const r of o)e.push(Promise.resolve().then((()=>s.get(r))).then((e=>"string"==typeof e||this.opts.compression?this.opts.deserialize(e):e)).then((e=>{if(null!=e)return"number"==typeof e.expires&&Date.now()>e.expires?this.delete(r).then((()=>{})):t&&t.raw?e:e.value})));return Promise.allSettled(e).then((e=>{const t=[];for(const s of e)t.push(s.value);return t}))}return Promise.resolve().then((()=>r?s.getMany(o):s.get(o))).then((e=>"string"==typeof e||this.opts.compression?this.opts.deserialize(e):e)).then((s=>{if(null!=s){if(r){const r=[];for(let o of s)"string"==typeof o&&(o=this.opts.deserialize(o)),null!=o?"number"==typeof o.expires&&Date.now()>o.expires?(this.delete(e).then((()=>{})),r.push(void 0)):r.push(t&&t.raw?o:o.value):r.push(void 0);return r}return"number"==typeof s.expires&&Date.now()>s.expires?this.delete(e).then((()=>{})):t&&t.raw?s:s.value}}))}set(e,t,s){const r=this._getKeyPrefix(e);void 0===s&&(s=this.opts.ttl),0===s&&(s=void 0);const{store:o}=this.opts;return Promise.resolve().then((()=>{const e="number"==typeof s?Date.now()+s:null;return"symbol"==typeof t&&this.emit("error","symbol cannot be serialized"),t={value:t,expires:e},this.opts.serialize(t)})).then((e=>o.set(r,e,s))).then((()=>!0))}delete(e){const{store:t}=this.opts;if(Array.isArray(e)){const s=this._getKeyPrefixArray(e);if(void 0===t.deleteMany){const e=[];for(const r of s)e.push(t.delete(r));return Promise.allSettled(e).then((e=>e.every((e=>!0===e.value))))}return Promise.resolve().then((()=>t.deleteMany(s)))}const s=this._getKeyPrefix(e);return Promise.resolve().then((()=>t.delete(s)))}clear(){const{store:e}=this.opts;return Promise.resolve().then((()=>e.clear()))}has(e){const t=this._getKeyPrefix(e),{store:s}=this.opts;return Promise.resolve().then((async()=>"function"==typeof s.has?s.has(t):void 0!==await s.get(t)))}disconnect(){const{store:e}=this.opts;if("function"==typeof e.disconnect)return e.disconnect()}}},196:e=>{function t(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}t.keys=()=>[],t.resolve=t,t.id=196,e.exports=t},269:e=>{"use strict";class t{constructor(e={}){if(!(e.maxSize&&e.maxSize>0))throw new TypeError("`maxSize` must be a number greater than 0");this.maxSize=e.maxSize,this.onEviction=e.onEviction,this.cache=new Map,this.oldCache=new Map,this._size=0}_set(e,t){if(this.cache.set(e,t),this._size++,this._size>=this.maxSize){if(this._size=0,"function"==typeof this.onEviction)for(const[e,t]of this.oldCache.entries())this.onEviction(e,t);this.oldCache=this.cache,this.cache=new Map}}get(e){if(this.cache.has(e))return this.cache.get(e);if(this.oldCache.has(e)){const t=this.oldCache.get(e);return this.oldCache.delete(e),this._set(e,t),t}}set(e,t){return this.cache.has(e)?this.cache.set(e,t):this._set(e,t),this}has(e){return this.cache.has(e)||this.oldCache.has(e)}peek(e){return this.cache.has(e)?this.cache.get(e):this.oldCache.has(e)?this.oldCache.get(e):void 0}delete(e){const t=this.cache.delete(e);return t&&this._size--,this.oldCache.delete(e)||t}clear(){this.cache.clear(),this.oldCache.clear(),this._size=0}*keys(){for(const[e]of this)yield e}*values(){for(const[,e]of this)yield e}*[Symbol.iterator](){for(const e of this.cache)yield e;for(const e of this.oldCache){const[t]=e;this.cache.has(t)||(yield e)}}get size(){let e=0;for(const t of this.oldCache.keys())this.cache.has(t)||e++;return Math.min(this._size+e,this.maxSize)}}e.exports=t},322:(e,t,s)=>{"use strict";const r=s(404);e.exports=(e={},t=r.connect)=>new Promise(((s,r)=>{let o,n=!1;const i=async()=>{await c,o.off("timeout",a),o.off("error",r),e.resolveSocket?(s({alpnProtocol:o.alpnProtocol,socket:o,timeout:n}),n&&(await Promise.resolve(),o.emit("timeout"))):(o.destroy(),s({alpnProtocol:o.alpnProtocol,timeout:n}))},a=async()=>{n=!0,i()},c=(async()=>{try{o=await t(e,i),o.on("error",r),o.once("timeout",a)}catch(e){r(e)}})()}))},414:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Platform=t.translation=t.PlatformAccessInfo=void 0;const r=s(916);var o;t.PlatformAccessInfo=class{constructor(e,t,s=!1){this.platform=o.youdao,this.appId=e,this.secretKey=t,this.auth=s}},t.translation=function(e,t){let s=t.getPlatformAccessInfo();if(!s.auth&&o.youdao===s.platform){let s=async function(e){let t="https://dict.youdao.com/suggest?num=5&ver=5.0&doctype=json&cache=false&le=en&q="+e,s=await r.default.get(t,{}).json();return Object.keys(s.data).length>0?s.data.entries[0].explain.split("; ")[0].replace(/\[[\u4e00-\u9fa5]*\]/,""):e}(e);s.then((e=>t.replaceText(e)))}},function(e){e[e.baidu=0]="baidu",e[e.youdao=1]="youdao",e[e.bytes=2]="bytes",e[e.google=3]="google"}(o=t.Platform||(t.Platform={}))},496:e=>{"use strict";e.exports=require("vscode")},491:e=>{"use strict";e.exports=require("assert")},300:e=>{"use strict";e.exports=require("buffer")},361:e=>{"use strict";e.exports=require("events")},181:e=>{"use strict";e.exports=require("http")},158:e=>{"use strict";e.exports=require("http2")},687:e=>{"use strict";e.exports=require("https")},808:e=>{"use strict";e.exports=require("net")},781:e=>{"use strict";e.exports=require("stream")},404:e=>{"use strict";e.exports=require("tls")},310:e=>{"use strict";e.exports=require("url")},837:e=>{"use strict";e.exports=require("util")},796:e=>{"use strict";e.exports=require("zlib")},916:(e,t,s)=>{"use strict";s.r(t),s.d(t,{AbortError:()=>C,CacheError:()=>x,CancelError:()=>bt,HTTPError:()=>S,MaxRedirectsError:()=>E,Options:()=>it,ParseError:()=>ct,ReadError:()=>T,RequestError:()=>v,RetryError:()=>P,TimeoutError:()=>k,UploadError:()=>O,calculateRetryDelay:()=>He,create:()=>Ot,default:()=>Pt,got:()=>Tt,isResponseOk:()=>at,parseBody:()=>ht,parseLinkHeader:()=>Xe});const r=["Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array","BigInt64Array","BigUint64Array"],o=["Function","Generator","AsyncGenerator","GeneratorFunction","AsyncGeneratorFunction","AsyncFunction","Observable","Array","Buffer","Blob","Object","RegExp","Date","Error","Map","Set","WeakMap","WeakSet","WeakRef","ArrayBuffer","SharedArrayBuffer","DataView","Promise","URL","FormData","URLSearchParams","HTMLElement","NaN",...r],n=["null","undefined","string","number","bigint","boolean","symbol"];function i(e){return t=>typeof t===e}const{toString:a}=Object.prototype,c=e=>{const t=a.call(e).slice(8,-1);return/HTML\w+Element/.test(t)&&l.domElement(e)?"HTMLElement":(s=t,o.includes(s)?t:void 0);var s},h=e=>t=>c(t)===e;function l(e){if(null===e)return"null";switch(typeof e){case"undefined":return"undefined";case"string":return"string";case"number":return Number.isNaN(e)?"NaN":"number";case"boolean":return"boolean";case"function":return"Function";case"bigint":return"bigint";case"symbol":return"symbol"}if(l.observable(e))return"Observable";if(l.array(e))return"Array";if(l.buffer(e))return"Buffer";const t=c(e);if(t)return t;if(e instanceof String||e instanceof Boolean||e instanceof Number)throw new TypeError("Please don't use object wrappers for primitive types");return"Object"}l.undefined=i("undefined"),l.string=i("string");const u=i("number");l.number=e=>u(e)&&!l.nan(e),l.bigint=i("bigint"),l.function_=i("function"),l.null_=e=>null===e,l.class_=e=>l.function_(e)&&e.toString().startsWith("class "),l.boolean=e=>!0===e||!1===e,l.symbol=i("symbol"),l.numericString=e=>l.string(e)&&!l.emptyStringOrWhitespace(e)&&!Number.isNaN(Number(e)),l.array=(e,t)=>!!Array.isArray(e)&&(!l.function_(t)||e.every((e=>t(e)))),l.buffer=e=>e?.constructor?.isBuffer?.(e)??!1,l.blob=e=>h("Blob")(e),l.nullOrUndefined=e=>l.null_(e)||l.undefined(e),l.object=e=>!l.null_(e)&&("object"==typeof e||l.function_(e)),l.iterable=e=>l.function_(e?.[Symbol.iterator]),l.asyncIterable=e=>l.function_(e?.[Symbol.asyncIterator]),l.generator=e=>l.iterable(e)&&l.function_(e?.next)&&l.function_(e?.throw),l.asyncGenerator=e=>l.asyncIterable(e)&&l.function_(e.next)&&l.function_(e.throw),l.nativePromise=e=>h("Promise")(e),l.promise=e=>l.nativePromise(e)||(e=>l.function_(e?.then)&&l.function_(e?.catch))(e),l.generatorFunction=h("GeneratorFunction"),l.asyncGeneratorFunction=e=>"AsyncGeneratorFunction"===c(e),l.asyncFunction=e=>"AsyncFunction"===c(e),l.boundFunction=e=>l.function_(e)&&!e.hasOwnProperty("prototype"),l.regExp=h("RegExp"),l.date=h("Date"),l.error=h("Error"),l.map=e=>h("Map")(e),l.set=e=>h("Set")(e),l.weakMap=e=>h("WeakMap")(e),l.weakSet=e=>h("WeakSet")(e),l.weakRef=e=>h("WeakRef")(e),l.int8Array=h("Int8Array"),l.uint8Array=h("Uint8Array"),l.uint8ClampedArray=h("Uint8ClampedArray"),l.int16Array=h("Int16Array"),l.uint16Array=h("Uint16Array"),l.int32Array=h("Int32Array"),l.uint32Array=h("Uint32Array"),l.float32Array=h("Float32Array"),l.float64Array=h("Float64Array"),l.bigInt64Array=h("BigInt64Array"),l.bigUint64Array=h("BigUint64Array"),l.arrayBuffer=h("ArrayBuffer"),l.sharedArrayBuffer=h("SharedArrayBuffer"),l.dataView=h("DataView"),l.enumCase=(e,t)=>Object.values(t).includes(e),l.directInstanceOf=(e,t)=>Object.getPrototypeOf(e)===t.prototype,l.urlInstance=e=>h("URL")(e),l.urlString=e=>{if(!l.string(e))return!1;try{return new URL(e),!0}catch{return!1}},l.truthy=e=>Boolean(e),l.falsy=e=>!e,l.nan=e=>Number.isNaN(e),l.primitive=e=>{return l.null_(e)||(t=typeof e,n.includes(t));var t},l.integer=e=>Number.isInteger(e),l.safeInteger=e=>Number.isSafeInteger(e),l.plainObject=e=>{if("object"!=typeof e||null===e)return!1;const t=Object.getPrototypeOf(e);return!(null!==t&&t!==Object.prototype&&null!==Object.getPrototypeOf(t)||Symbol.toStringTag in e||Symbol.iterator in e)},l.typedArray=e=>{return t=c(e),r.includes(t);var t},l.arrayLike=e=>!l.nullOrUndefined(e)&&!l.function_(e)&&(e=>l.safeInteger(e)&&e>=0)(e.length),l.inRange=(e,t)=>{if(l.number(t))return e>=Math.min(0,t)&&e<=Math.max(t,0);if(l.array(t)&&2===t.length)return e>=Math.min(...t)&&e<=Math.max(...t);throw new TypeError(`Invalid range: ${JSON.stringify(t)}`)};const d=["innerHTML","ownerDocument","style","attributes","nodeValue"];l.domElement=e=>l.object(e)&&1===e.nodeType&&l.string(e.nodeName)&&!l.plainObject(e)&&d.every((t=>t in e)),l.observable=e=>!!e&&(e===e[Symbol.observable]?.()||e===e["@@observable"]?.()),l.nodeStream=e=>l.object(e)&&l.function_(e.pipe)&&!l.observable(e),l.infinite=e=>e===Number.POSITIVE_INFINITY||e===Number.NEGATIVE_INFINITY;const p=e=>t=>l.integer(t)&&Math.abs(t%2)===e;l.evenInteger=p(0),l.oddInteger=p(1),l.emptyArray=e=>l.array(e)&&0===e.length,l.nonEmptyArray=e=>l.array(e)&&e.length>0,l.emptyString=e=>l.string(e)&&0===e.length,l.emptyStringOrWhitespace=e=>l.emptyString(e)||(e=>l.string(e)&&!/\S/.test(e))(e),l.nonEmptyString=e=>l.string(e)&&e.length>0,l.nonEmptyStringAndNotWhitespace=e=>l.string(e)&&!l.emptyStringOrWhitespace(e),l.emptyObject=e=>l.object(e)&&!l.map(e)&&!l.set(e)&&0===Object.keys(e).length,l.nonEmptyObject=e=>l.object(e)&&!l.map(e)&&!l.set(e)&&Object.keys(e).length>0,l.emptySet=e=>l.set(e)&&0===e.size,l.nonEmptySet=e=>l.set(e)&&e.size>0,l.emptyMap=e=>l.map(e)&&0===e.size,l.nonEmptyMap=e=>l.map(e)&&e.size>0,l.propertyKey=e=>l.any([l.string,l.number,l.symbol],e),l.formData=e=>h("FormData")(e),l.urlSearchParams=e=>h("URLSearchParams")(e);const f=(e,t,s)=>{if(!l.function_(t))throw new TypeError(`Invalid predicate: ${JSON.stringify(t)}`);if(0===s.length)throw new TypeError("Invalid number of values");return e.call(s,t)};l.any=(e,...t)=>(l.array(e)?e:[e]).some((e=>f(Array.prototype.some,e,t))),l.all=(e,...t)=>f(Array.prototype.every,e,t);const m=(e,t,s,r={})=>{if(!e){const{multipleValues:e}=r,o=e?`received values of types ${[...new Set(s.map((e=>`\`${l(e)}\``)))].join(", ")}`:`received value of type \`${l(s)}\``;throw new TypeError(`Expected value which is \`${t}\`, ${o}.`)}},y={undefined:e=>m(l.undefined(e),"undefined",e),string:e=>m(l.string(e),"string",e),number:e=>m(l.number(e),"number",e),bigint:e=>m(l.bigint(e),"bigint",e),function_:e=>m(l.function_(e),"Function",e),null_:e=>m(l.null_(e),"null",e),class_:e=>m(l.class_(e),"Class",e),boolean:e=>m(l.boolean(e),"boolean",e),symbol:e=>m(l.symbol(e),"symbol",e),numericString:e=>m(l.numericString(e),"string with a number",e),array:(e,t)=>{m(l.array(e),"Array",e),t&&e.forEach(t)},buffer:e=>m(l.buffer(e),"Buffer",e),blob:e=>m(l.blob(e),"Blob",e),nullOrUndefined:e=>m(l.nullOrUndefined(e),"null or undefined",e),object:e=>m(l.object(e),"Object",e),iterable:e=>m(l.iterable(e),"Iterable",e),asyncIterable:e=>m(l.asyncIterable(e),"AsyncIterable",e),generator:e=>m(l.generator(e),"Generator",e),asyncGenerator:e=>m(l.asyncGenerator(e),"AsyncGenerator",e),nativePromise:e=>m(l.nativePromise(e),"native Promise",e),promise:e=>m(l.promise(e),"Promise",e),generatorFunction:e=>m(l.generatorFunction(e),"GeneratorFunction",e),asyncGeneratorFunction:e=>m(l.asyncGeneratorFunction(e),"AsyncGeneratorFunction",e),asyncFunction:e=>m(l.asyncFunction(e),"AsyncFunction",e),boundFunction:e=>m(l.boundFunction(e),"Function",e),regExp:e=>m(l.regExp(e),"RegExp",e),date:e=>m(l.date(e),"Date",e),error:e=>m(l.error(e),"Error",e),map:e=>m(l.map(e),"Map",e),set:e=>m(l.set(e),"Set",e),weakMap:e=>m(l.weakMap(e),"WeakMap",e),weakSet:e=>m(l.weakSet(e),"WeakSet",e),weakRef:e=>m(l.weakRef(e),"WeakRef",e),int8Array:e=>m(l.int8Array(e),"Int8Array",e),uint8Array:e=>m(l.uint8Array(e),"Uint8Array",e),uint8ClampedArray:e=>m(l.uint8ClampedArray(e),"Uint8ClampedArray",e),int16Array:e=>m(l.int16Array(e),"Int16Array",e),uint16Array:e=>m(l.uint16Array(e),"Uint16Array",e),int32Array:e=>m(l.int32Array(e),"Int32Array",e),uint32Array:e=>m(l.uint32Array(e),"Uint32Array",e),float32Array:e=>m(l.float32Array(e),"Float32Array",e),float64Array:e=>m(l.float64Array(e),"Float64Array",e),bigInt64Array:e=>m(l.bigInt64Array(e),"BigInt64Array",e),bigUint64Array:e=>m(l.bigUint64Array(e),"BigUint64Array",e),arrayBuffer:e=>m(l.arrayBuffer(e),"ArrayBuffer",e),sharedArrayBuffer:e=>m(l.sharedArrayBuffer(e),"SharedArrayBuffer",e),dataView:e=>m(l.dataView(e),"DataView",e),enumCase:(e,t)=>m(l.enumCase(e,t),"EnumCase",e),urlInstance:e=>m(l.urlInstance(e),"URL",e),urlString:e=>m(l.urlString(e),"string with a URL",e),truthy:e=>m(l.truthy(e),"truthy",e),falsy:e=>m(l.falsy(e),"falsy",e),nan:e=>m(l.nan(e),"NaN",e),primitive:e=>m(l.primitive(e),"primitive",e),integer:e=>m(l.integer(e),"integer",e),safeInteger:e=>m(l.safeInteger(e),"integer",e),plainObject:e=>m(l.plainObject(e),"plain object",e),typedArray:e=>m(l.typedArray(e),"TypedArray",e),arrayLike:e=>m(l.arrayLike(e),"array-like",e),domElement:e=>m(l.domElement(e),"HTMLElement",e),observable:e=>m(l.observable(e),"Observable",e),nodeStream:e=>m(l.nodeStream(e),"Node.js Stream",e),infinite:e=>m(l.infinite(e),"infinite number",e),emptyArray:e=>m(l.emptyArray(e),"empty array",e),nonEmptyArray:e=>m(l.nonEmptyArray(e),"non-empty array",e),emptyString:e=>m(l.emptyString(e),"empty string",e),emptyStringOrWhitespace:e=>m(l.emptyStringOrWhitespace(e),"empty string or whitespace",e),nonEmptyString:e=>m(l.nonEmptyString(e),"non-empty string",e),nonEmptyStringAndNotWhitespace:e=>m(l.nonEmptyStringAndNotWhitespace(e),"non-empty string and not whitespace",e),emptyObject:e=>m(l.emptyObject(e),"empty object",e),nonEmptyObject:e=>m(l.nonEmptyObject(e),"non-empty object",e),emptySet:e=>m(l.emptySet(e),"empty set",e),nonEmptySet:e=>m(l.nonEmptySet(e),"non-empty set",e),emptyMap:e=>m(l.emptyMap(e),"empty map",e),nonEmptyMap:e=>m(l.nonEmptyMap(e),"non-empty map",e),propertyKey:e=>m(l.propertyKey(e),"PropertyKey",e),formData:e=>m(l.formData(e),"FormData",e),urlSearchParams:e=>m(l.urlSearchParams(e),"URLSearchParams",e),evenInteger:e=>m(l.evenInteger(e),"even integer",e),oddInteger:e=>m(l.oddInteger(e),"odd integer",e),directInstanceOf:(e,t)=>m(l.directInstanceOf(e,t),"T",e),inRange:(e,t)=>m(l.inRange(e,t),"in range",e),any:(e,...t)=>m(l.any(e,...t),"predicate returns truthy for any value",t,{multipleValues:!0}),all:(e,...t)=>m(l.all(e,...t),"predicate returns truthy for all values",t,{multipleValues:!0})};Object.defineProperties(l,{class:{value:l.class_},function:{value:l.function_},null:{value:l.null_}}),Object.defineProperties(y,{class:{value:y.class_},function:{value:y.function_},null:{value:y.null_}});const g=l,b=require("node:events");class _ extends Error{constructor(e){super(e||"Promise was canceled"),this.name="CancelError"}get isCanceled(){return!0}}class w{static fn(e){return(...t)=>new w(((s,r,o)=>{t.push(o),e(...t).then(s,r)}))}constructor(e){this._cancelHandlers=[],this._isPending=!0,this._isCanceled=!1,this._rejectOnCancel=!0,this._promise=new Promise(((t,s)=>{this._reject=s;const r=e=>{if(!this._isPending)throw new Error("The `onCancel` handler was attached after the promise settled.");this._cancelHandlers.push(e)};Object.defineProperties(r,{shouldReject:{get:()=>this._rejectOnCancel,set:e=>{this._rejectOnCancel=e}}}),e((e=>{this._isCanceled&&r.shouldReject||(this._isPending=!1,t(e))}),(e=>{this._isPending=!1,s(e)}),r)}))}then(e,t){return this._promise.then(e,t)}catch(e){return this._promise.catch(e)}finally(e){return this._promise.finally(e)}cancel(e){if(this._isPending&&!this._isCanceled){if(this._isCanceled=!0,this._cancelHandlers.length>0)try{for(const e of this._cancelHandlers)e()}catch(e){return void this._reject(e)}this._rejectOnCancel&&this._reject(new _(e))}}get isCanceled(){return this._isCanceled}}Object.setPrototypeOf(w.prototype,Promise.prototype);class v extends Error{constructor(e,t,s){var r;if(super(e),Object.defineProperty(this,"input",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"stack",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"response",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"request",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"timings",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Error.captureStackTrace(this,this.constructor),this.name="RequestError",this.code=t.code??"ERR_GOT_REQUEST_ERROR",this.input=t.input,r=s,g.object(r)&&"_onResponse"in r?(Object.defineProperty(this,"request",{enumerable:!1,value:s}),Object.defineProperty(this,"response",{enumerable:!1,value:s.response}),this.options=s.options):this.options=s,this.timings=this.request?.timings,g.string(t.stack)&&g.string(this.stack)){const e=this.stack.indexOf(this.message)+this.message.length,s=this.stack.slice(e).split("\n").reverse(),r=t.stack.slice(t.stack.indexOf(t.message)+t.message.length).split("\n").reverse();for(;r.length>0&&r[0]===s[0];)s.shift();this.stack=`${this.stack.slice(0,e)}${s.reverse().join("\n")}${r.reverse().join("\n")}`}}}class E extends v{constructor(e){super(`Redirected ${e.options.maxRedirects} times. Aborting.`,{},e),this.name="MaxRedirectsError",this.code="ERR_TOO_MANY_REDIRECTS"}}class S extends v{constructor(e){super(`Response code ${e.statusCode} (${e.statusMessage})`,{},e.request),this.name="HTTPError",this.code="ERR_NON_2XX_3XX_RESPONSE"}}class x extends v{constructor(e,t){super(e.message,e,t),this.name="CacheError",this.code="ERR_GOT_REQUEST_ERROR"===this.code?"ERR_CACHE_ACCESS":this.code}}class O extends v{constructor(e,t){super(e.message,e,t),this.name="UploadError",this.code="ERR_GOT_REQUEST_ERROR"===this.code?"ERR_UPLOAD":this.code}}class k extends v{constructor(e,t,s){super(e.message,e,s),Object.defineProperty(this,"timings",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"event",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.name="TimeoutError",this.event=e.event,this.timings=t}}class T extends v{constructor(e,t){super(e.message,e,t),this.name="ReadError",this.code="ERR_GOT_REQUEST_ERROR"===this.code?"ERR_READING_RESPONSE_STREAM":this.code}}class P extends v{constructor(e){super("Retrying",{},e),this.name="RetryError",this.code="ERR_RETRYING"}}class C extends v{constructor(e){super("This operation was aborted.",{},e),this.code="ERR_ABORTED",this.name="AbortError"}}const R=require("node:process"),A=require("node:buffer"),j=require("node:stream"),H=require("node:url"),q=require("node:http");var I=s(361),L=s(837),N=s(313);const U=require("node:crypto"),$=(e,t)=>t.some((t=>t instanceof RegExp?t.test(e):t===e)),z=new Set(["https:","http:","file:"]);var D=s(31),M=s(214);function B(e){return Object.fromEntries(Object.entries(e).map((([e,t])=>[e.toLowerCase(),t])))}class F extends j.Readable{statusCode;headers;body;url;constructor({statusCode:e,headers:t,body:s,url:r}){if("number"!=typeof e)throw new TypeError("Argument `statusCode` should be a number");if("object"!=typeof t)throw new TypeError("Argument `headers` should be an object");if(!(s instanceof Uint8Array))throw new TypeError("Argument `body` should be a buffer");if("string"!=typeof r)throw new TypeError("Argument `url` should be a string");super({read(){this.push(s),this.push(null)}}),this.statusCode=e,this.headers=B(t),this.body=s,this.url=r}}var W=s(958);const V=["aborted","complete","headers","httpVersion","httpVersionMinor","httpVersionMajor","method","rawHeaders","rawTrailers","setTimeout","socket","statusCode","statusMessage","trailers","url"];class G extends Error{constructor(e){super(e.message),Object.assign(this,e)}}class J extends Error{constructor(e){super(e.message),Object.assign(this,e)}}const K=Object.entries,Q=e=>{const t={...e};return t.path=`${e.pathname||"/"}${e.search||""}`,delete t.pathname,delete t.search,t},Y=e=>({protocol:e.protocol,auth:e.auth,hostname:e.hostname||e.host||"localhost",port:e.port,pathname:e.pathname,search:e.search}),X=e=>{const t=[];for(const s of Object.keys(e))t[s.toLowerCase()]=e[s];return t};var Z=s(346);const ee=e=>"function"==typeof e,te=e=>Boolean(e&&ee(e.constructor)&&"FormData"===e[Symbol.toStringTag]&&ee(e.append)&&ee(e.getAll)&&ee(e.entries)&&ee(e[Symbol.iterator])),se=e=>{if(ee(e[Symbol.asyncIterator]))return e;if(ee(e.getReader))return async function*(e){const t=e.getReader();for(;;){const{done:e,value:s}=await t.read();if(e)break;yield s}}(e);throw new TypeError("Unsupported data source: Expected either ReadableStream or async iterable.")},re="abcdefghijklmnopqrstuvwxyz0123456789",oe=e=>String(e).replace(/\r|\n/g,((e,t,s)=>"\r"===e&&"\n"!==s[t+1]||"\n"===e&&"\r"!==s[t-1]?"\r\n":e)),ne=e=>Object.prototype.toString.call(e).slice(8,-1).toLowerCase();function ie(e){if("object"!==ne(e))return!1;const t=Object.getPrototypeOf(e);return null==t||(t.constructor&&t.constructor.toString())===Object.toString()}function ae(e,t){if("string"==typeof t)for(const[s,r]of Object.entries(e))if(t.toLowerCase()===s.toLowerCase())return r}const ce=e=>String(e).replace(/\r/g,"%0D").replace(/\n/g,"%0A").replace(/"/g,"%22"),he=e=>Boolean(e&&"object"==typeof e&&ee(e.constructor)&&"File"===e[Symbol.toStringTag]&&ee(e.stream)&&null!=e.name);var le,ue,de,pe,fe,me,ye,ge,be,_e,we,ve=function(e,t,s,r,o){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!o)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!o:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?o.call(e,s):o?o.value=s:t.set(e,s),s},Ee=function(e,t,s,r){if("a"===s&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===s?r:"a"===s?r.call(e):r?r.value:t.get(e)};const Se={enableAdditionalHeaders:!1},xe={writable:!1,configurable:!1};class Oe{constructor(e,t,s){if(le.add(this),ue.set(this,"\r\n"),de.set(this,void 0),pe.set(this,void 0),fe.set(this,"-".repeat(2)),me.set(this,new TextEncoder),ye.set(this,void 0),ge.set(this,void 0),be.set(this,void 0),!te(e))throw new TypeError("Expected first argument to be a FormData instance.");let r;if(ie(t)?s=t:r=t,r||(r=function(){let e=16,t="";for(;e--;)t+=re[Math.random()*re.length<<0];return t}()),"string"!=typeof r)throw new TypeError("Expected boundary argument to be a string.");if(s&&!ie(s))throw new TypeError("Expected options argument to be an object.");ve(this,ge,Array.from(e.entries()),"f"),ve(this,be,{...Se,...s},"f"),ve(this,de,Ee(this,me,"f").encode(Ee(this,ue,"f")),"f"),ve(this,pe,Ee(this,de,"f").byteLength,"f"),this.boundary=`form-data-boundary-${r}`,this.contentType=`multipart/form-data; boundary=${this.boundary}`,ve(this,ye,Ee(this,me,"f").encode(`${Ee(this,fe,"f")}${this.boundary}${Ee(this,fe,"f")}${Ee(this,ue,"f").repeat(2)}`),"f");const o={"Content-Type":this.contentType},n=Ee(this,le,"m",we).call(this);var i;n&&(this.contentLength=n,o["Content-Length"]=n),this.headers=(i=Object.freeze(o),new Proxy(i,{get:(e,t)=>ae(e,t),has:(e,t)=>void 0!==ae(e,t)})),Object.defineProperties(this,{boundary:xe,contentType:xe,contentLength:xe,headers:xe})}getContentLength(){return null==this.contentLength?void 0:Number(this.contentLength)}*values(){for(const[e,t]of Ee(this,ge,"f")){const s=he(t)?t:Ee(this,me,"f").encode(oe(t));yield Ee(this,le,"m",_e).call(this,e,s),yield s,yield Ee(this,de,"f")}yield Ee(this,ye,"f")}async*encode(){for(const e of this.values())he(e)?yield*se(e.stream()):yield e}[(ue=new WeakMap,de=new WeakMap,pe=new WeakMap,fe=new WeakMap,me=new WeakMap,ye=new WeakMap,ge=new WeakMap,be=new WeakMap,le=new WeakSet,_e=function(e,t){let s="";s+=`${Ee(this,fe,"f")}${this.boundary}${Ee(this,ue,"f")}`,s+=`Content-Disposition: form-data; name="${ce(e)}"`,he(t)&&(s+=`; filename="${ce(t.name)}"${Ee(this,ue,"f")}`,s+=`Content-Type: ${t.type||"application/octet-stream"}`);const r=he(t)?t.size:t.byteLength;return!0!==Ee(this,be,"f").enableAdditionalHeaders||null==r||isNaN(r)||(s+=`${Ee(this,ue,"f")}Content-Length: ${he(t)?t.size:t.byteLength}`),Ee(this,me,"f").encode(`${s}${Ee(this,ue,"f").repeat(2)}`)},we=function(){let e=0;for(const[t,s]of Ee(this,ge,"f")){const r=he(s)?s:Ee(this,me,"f").encode(oe(s)),o=he(r)?r.size:r.byteLength;if(null==o||isNaN(o))return;e+=Ee(this,le,"m",_e).call(this,t,r).byteLength,e+=o,e+=Ee(this,pe,"f")}return String(e+Ee(this,ye,"f").byteLength)},Symbol.iterator)](){return this.values()}[Symbol.asyncIterator](){return this.encode()}}const ke=require("node:util");function Te(e){return g.nodeStream(e)&&g.function_(e.getBoundary)}function Pe(e,t,s){const r={};for(const o of s){const s=(...e)=>{t.emit(o,...e)};r[o]=s,e.on(o,s)}return()=>{for(const[t,s]of Object.entries(r))e.off(t,s)}}const Ce=require("node:net"),Re=Symbol("reentry"),Ae=()=>{};class je extends Error{constructor(e,t){super(`Timeout awaiting '${t}' for ${e}ms`),Object.defineProperty(this,"event",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.name="TimeoutError",this.code="ETIMEDOUT"}}const He=({attemptCount:e,retryOptions:t,error:s,retryAfter:r,computedValue:o})=>{if("RetryError"===s.name)return 1;if(e>t.limit)return 0;const n=t.methods.includes(s.options.method),i=t.errorCodes.includes(s.code),a=s.response&&t.statusCodes.includes(s.response.statusCode);if(!n||!i&&!a)return 0;if(s.response){if(r)return r>o?0:r;if(413===s.response.statusCode)return 0}const c=Math.random()*t.noise;return Math.min(2**(e-1)*1e3,t.backoffLimit)+c},qe=require("node:tls"),Ie=require("node:https"),Le=require("node:dns"),Ne=require("node:os"),{Resolver:Ue}=Le.promises,$e=Symbol("cacheableLookupCreateConnection"),ze=Symbol("cacheableLookupInstance"),De=Symbol("expires"),Me="number"==typeof Le.ALL,Be=e=>{if(!e||"function"!=typeof e.createConnection)throw new Error("Expected an Agent instance as the first argument")},Fe=()=>{let e=!1,t=!1;for(const s of Object.values(Ne.networkInterfaces()))for(const r of s)if(!r.internal&&("IPv6"===r.family?t=!0:e=!0,e&&t))return{has4:e,has6:t};return{has4:e,has6:t}},We=e=>e.catch((e=>{if("ENODATA"===e.code||"ENOTFOUND"===e.code||"ENOENT"===e.code)return[];throw e})),Ve={ttl:!0},Ge={all:!0},Je={all:!0,family:4},Ke={all:!0,family:6};class Qe{constructor({cache:e=new Map,maxTtl:t=1/0,fallbackDuration:s=3600,errorTtl:r=.15,resolver:o=new Ue,lookup:n=Le.lookup}={}){if(this.maxTtl=t,this.errorTtl=r,this._cache=e,this._resolver=o,this._dnsLookup=n&&(0,ke.promisify)(n),this.stats={cache:0,query:0},this._resolver instanceof Ue?(this._resolve4=this._resolver.resolve4.bind(this._resolver),this._resolve6=this._resolver.resolve6.bind(this._resolver)):(this._resolve4=(0,ke.promisify)(this._resolver.resolve4.bind(this._resolver)),this._resolve6=(0,ke.promisify)(this._resolver.resolve6.bind(this._resolver))),this._iface=Fe(),this._pending={},this._nextRemovalTime=!1,this._hostnamesToFallback=new Set,this.fallbackDuration=s,s>0){const e=setInterval((()=>{this._hostnamesToFallback.clear()}),1e3*s);e.unref&&e.unref(),this._fallbackInterval=e}this.lookup=this.lookup.bind(this),this.lookupAsync=this.lookupAsync.bind(this)}set servers(e){this.clear(),this._resolver.setServers(e)}get servers(){return this._resolver.getServers()}lookup(e,t,s){if("function"==typeof t?(s=t,t={}):"number"==typeof t&&(t={family:t}),!s)throw new Error("Callback must be a function.");this.lookupAsync(e,t).then((e=>{t.all?s(null,e):s(null,e.address,e.family,e.expires,e.ttl,e.source)}),s)}async lookupAsync(e,t={}){"number"==typeof t&&(t={family:t});let s=await this.query(e);if(6===t.family){const e=s.filter((e=>6===e.family));t.hints&Le.V4MAPPED&&(Me&&t.hints&Le.ALL||0===e.length)?(e=>{for(const t of e)6!==t.family&&(t.address=`::ffff:${t.address}`,t.family=6)})(s):s=e}else 4===t.family&&(s=s.filter((e=>4===e.family)));if(t.hints&Le.ADDRCONFIG){const{_iface:e}=this;s=s.filter((t=>6===t.family?e.has6:e.has4))}if(0===s.length){const t=new Error(`cacheableLookup ENOTFOUND ${e}`);throw t.code="ENOTFOUND",t.hostname=e,t}return t.all?s:s[0]}async query(e){let t="cache",s=await this._cache.get(e);if(s&&this.stats.cache++,!s){const r=this._pending[e];if(r)this.stats.cache++,s=await r;else{t="query";const r=this.queryAndCache(e);this._pending[e]=r,this.stats.query++;try{s=await r}finally{delete this._pending[e]}}}return s=s.map((e=>({...e,source:t}))),s}async _resolve(e){const[t,s]=await Promise.all([We(this._resolve4(e,Ve)),We(this._resolve6(e,Ve))]);let r=0,o=0,n=0;const i=Date.now();for(const e of t)e.family=4,e.expires=i+1e3*e.ttl,r=Math.max(r,e.ttl);for(const e of s)e.family=6,e.expires=i+1e3*e.ttl,o=Math.max(o,e.ttl);return n=t.length>0?s.length>0?Math.min(r,o):r:o,{entries:[...t,...s],cacheTtl:n}}async _lookup(e){try{const[t,s]=await Promise.all([We(this._dnsLookup(e,Je)),We(this._dnsLookup(e,Ke))]);return{entries:[...t,...s],cacheTtl:0}}catch{return{entries:[],cacheTtl:0}}}async _set(e,t,s){if(this.maxTtl>0&&s>0){s=1e3*Math.min(s,this.maxTtl),t[De]=Date.now()+s;try{await this._cache.set(e,t,s)}catch(e){this.lookupAsync=async()=>{const t=new Error("Cache Error. Please recreate the CacheableLookup instance.");throw t.cause=e,t}}r=this._cache,Symbol.iterator in r&&this._tick(s)}var r}async queryAndCache(e){if(this._hostnamesToFallback.has(e))return this._dnsLookup(e,Ge);let t=await this._resolve(e);0===t.entries.length&&this._dnsLookup&&(t=await this._lookup(e),0!==t.entries.length&&this.fallbackDuration>0&&this._hostnamesToFallback.add(e));const s=0===t.entries.length?this.errorTtl:t.cacheTtl;return await this._set(e,t.entries,s),t.entries}_tick(e){const t=this._nextRemovalTime;(!t||e<t)&&(clearTimeout(this._removalTimeout),this._nextRemovalTime=e,this._removalTimeout=setTimeout((()=>{this._nextRemovalTime=!1;let e=1/0;const t=Date.now();for(const[s,r]of this._cache){const o=r[De];t>=o?this._cache.delete(s):o<e&&(e=o)}e!==1/0&&this._tick(e-t)}),e),this._removalTimeout.unref&&this._removalTimeout.unref())}install(e){if(Be(e),$e in e)throw new Error("CacheableLookup has been already installed");e[$e]=e.createConnection,e[ze]=this,e.createConnection=(t,s)=>("lookup"in t||(t.lookup=this.lookup),e[$e](t,s))}uninstall(e){if(Be(e),e[$e]){if(e[ze]!==this)throw new Error("The agent is not owned by this CacheableLookup instance");e.createConnection=e[$e],delete e[$e],delete e[ze]}}updateInterfaceInfo(){const{_iface:e}=this;this._iface=Fe(),(e.has4&&!this._iface.has4||e.has6&&!this._iface.has6)&&this._cache.clear()}clear(e){e?this._cache.delete(e):this._cache.clear()}}var Ye=s(758);function Xe(e){const t=[],s=e.split(",");for(const r of s){const[s,...o]=r.split(";"),n=s.trim();if("<"!==n[0]||">"!==n[n.length-1])throw new Error(`Invalid format of the Link header reference: ${n}`);const i=n.slice(1,-1),a={};if(0===o.length)throw new Error(`Unexpected end of Link header parameters: ${o.join(";")}`);for(const t of o){const s=t.trim(),r=s.indexOf("=");if(-1===r)throw new Error(`Failed to parse Link header: ${e}`);const o=s.slice(0,r).trim(),n=s.slice(r+1).trim();a[o]=n}t.push({reference:i,parameters:a})}return t}const[Ze,et]=R.versions.node.split(".").map(Number),tt=new Map;let st;const rt={request:void 0,agent:{http:void 0,https:void 0,http2:void 0},h2session:void 0,decompress:!0,timeout:{connect:void 0,lookup:void 0,read:void 0,request:void 0,response:void 0,secureConnect:void 0,send:void 0,socket:void 0},prefixUrl:"",body:void 0,form:void 0,json:void 0,cookieJar:void 0,ignoreInvalidCookies:!1,searchParams:void 0,dnsLookup:void 0,dnsCache:void 0,context:{},hooks:{init:[],beforeRequest:[],beforeError:[],beforeRedirect:[],beforeRetry:[],afterResponse:[]},followRedirect:!0,maxRedirects:10,cache:void 0,throwHttpErrors:!0,username:"",password:"",http2:!1,allowGetBody:!1,headers:{"user-agent":"got (https://github.com/sindresorhus/got)"},methodRewriting:!1,dnsLookupIpVersion:void 0,parseJson:JSON.parse,stringifyJson:JSON.stringify,retry:{limit:2,methods:["GET","PUT","HEAD","DELETE","OPTIONS","TRACE"],statusCodes:[408,413,429,500,502,503,504,521,522,524],errorCodes:["ETIMEDOUT","ECONNRESET","EADDRINUSE","ECONNREFUSED","EPIPE","ENOTFOUND","ENETUNREACH","EAI_AGAIN"],maxRetryAfter:void 0,calculateDelay:({computedValue:e})=>e,backoffLimit:Number.POSITIVE_INFINITY,noise:100},localAddress:void 0,method:"GET",createConnection:void 0,cacheOptions:{shared:void 0,cacheHeuristic:void 0,immutableMinTimeToLive:void 0,ignoreCargoCult:void 0},https:{alpnProtocols:void 0,rejectUnauthorized:void 0,checkServerIdentity:void 0,certificateAuthority:void 0,key:void 0,certificate:void 0,passphrase:void 0,pfx:void 0,ciphers:void 0,honorCipherOrder:void 0,minVersion:void 0,maxVersion:void 0,signatureAlgorithms:void 0,tlsSessionLifetime:void 0,dhparam:void 0,ecdhCurve:void 0,certificateRevocationLists:void 0},encoding:void 0,resolveBodyOnly:!1,isStream:!1,responseType:"text",url:void 0,pagination:{transform:e=>"json"===e.request.options.responseType?e.body:JSON.parse(e.body),paginate({response:e}){const t=e.headers.link;if("string"!=typeof t||""===t.trim())return!1;const s=Xe(t).find((e=>"next"===e.parameters.rel||'"next"'===e.parameters.rel));return!!s&&{url:new H.URL(s.reference,e.url)}},filter:()=>!0,shouldContinue:()=>!0,countLimit:Number.POSITIVE_INFINITY,backoff:0,requestLimit:1e4,stackAllItems:!1},setHost:!0,maxHeaderSize:void 0,signal:void 0,enableUnixSockets:!0},ot=e=>{const t=[e.timeout.socket,e.timeout.connect,e.timeout.lookup,e.timeout.request,e.timeout.secureConnect].filter((e=>"number"==typeof e));if(t.length>0)return Math.min(...t)},nt=(e,t,s)=>{const r=e.hooks?.init;if(r)for(const e of r)e(t,s)};class it{constructor(e,t,s){if(Object.defineProperty(this,"_unixOptions",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_internals",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_merging",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_init",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),y.any([g.string,g.urlInstance,g.object,g.undefined],e),y.any([g.object,g.undefined],t),y.any([g.object,g.undefined],s),e instanceof it||t instanceof it)throw new TypeError("The defaults must be passed as the third argument");this._internals=(e=>{const{hooks:t,retry:s}=e,r={...e,context:{...e.context},cacheOptions:{...e.cacheOptions},https:{...e.https},agent:{...e.agent},headers:{...e.headers},retry:{...s,errorCodes:[...s.errorCodes],methods:[...s.methods],statusCodes:[...s.statusCodes]},timeout:{...e.timeout},hooks:{init:[...t.init],beforeRequest:[...t.beforeRequest],beforeError:[...t.beforeError],beforeRedirect:[...t.beforeRedirect],beforeRetry:[...t.beforeRetry],afterResponse:[...t.afterResponse]},searchParams:e.searchParams?new H.URLSearchParams(e.searchParams):void 0,pagination:{...e.pagination}};return void 0!==r.url&&(r.prefixUrl=""),r})(s?._internals??s??rt),this._init=[...s?._init??[]],this._merging=!1,this._unixOptions=void 0;try{if(g.plainObject(e))try{this.merge(e),this.merge(t)}finally{this.url=e.url}else try{this.merge(t)}finally{if(void 0!==t?.url){if(void 0!==e)throw new TypeError("The `url` option is mutually exclusive with the `input` argument");this.url=t.url}else void 0!==e&&(this.url=e)}}catch(e){throw e.options=this,e}}merge(e){if(e)if(e instanceof it)for(const t of e._init)this.merge(t);else{e=(e=>{const{hooks:t,retry:s}=e,r={...e};return g.object(e.context)&&(r.context={...e.context}),g.object(e.cacheOptions)&&(r.cacheOptions={...e.cacheOptions}),g.object(e.https)&&(r.https={...e.https}),g.object(e.cacheOptions)&&(r.cacheOptions={...r.cacheOptions}),g.object(e.agent)&&(r.agent={...e.agent}),g.object(e.headers)&&(r.headers={...e.headers}),g.object(s)&&(r.retry={...s},g.array(s.errorCodes)&&(r.retry.errorCodes=[...s.errorCodes]),g.array(s.methods)&&(r.retry.methods=[...s.methods]),g.array(s.statusCodes)&&(r.retry.statusCodes=[...s.statusCodes])),g.object(e.timeout)&&(r.timeout={...e.timeout}),g.object(t)&&(r.hooks={...t},g.array(t.init)&&(r.hooks.init=[...t.init]),g.array(t.beforeRequest)&&(r.hooks.beforeRequest=[...t.beforeRequest]),g.array(t.beforeError)&&(r.hooks.beforeError=[...t.beforeError]),g.array(t.beforeRedirect)&&(r.hooks.beforeRedirect=[...t.beforeRedirect]),g.array(t.beforeRetry)&&(r.hooks.beforeRetry=[...t.beforeRetry]),g.array(t.afterResponse)&&(r.hooks.afterResponse=[...t.afterResponse])),g.object(e.pagination)&&(r.pagination={...e.pagination}),r})(e),nt(this,e,this),nt(e,e,this),this._merging=!0,"isStream"in e&&(this.isStream=e.isStream);try{let t=!1;for(const s in e)if("mutableDefaults"!==s&&"handlers"!==s&&"url"!==s){if(!(s in this))throw new Error(`Unexpected option: ${s}`);this[s]=e[s],t=!0}t&&this._init.push(e)}finally{this._merging=!1}}}get request(){return this._internals.request}set request(e){y.any([g.function_,g.undefined],e),this._internals.request=e}get agent(){return this._internals.agent}set agent(e){y.plainObject(e);for(const t in e){if(!(t in this._internals.agent))throw new TypeError(`Unexpected agent option: ${t}`);y.any([g.object,g.undefined],e[t])}this._merging?Object.assign(this._internals.agent,e):this._internals.agent={...e}}get h2session(){return this._internals.h2session}set h2session(e){this._internals.h2session=e}get decompress(){return this._internals.decompress}set decompress(e){y.boolean(e),this._internals.decompress=e}get timeout(){return this._internals.timeout}set timeout(e){y.plainObject(e);for(const t in e){if(!(t in this._internals.timeout))throw new Error(`Unexpected timeout option: ${t}`);y.any([g.number,g.undefined],e[t])}this._merging?Object.assign(this._internals.timeout,e):this._internals.timeout={...e}}get prefixUrl(){return this._internals.prefixUrl}set prefixUrl(e){if(y.any([g.string,g.urlInstance],e),""!==e){if((e=e.toString()).endsWith("/")||(e+="/"),this._internals.prefixUrl&&this._internals.url){const{href:t}=this._internals.url;this._internals.url.href=e+t.slice(this._internals.prefixUrl.length)}this._internals.prefixUrl=e}else this._internals.prefixUrl=""}get body(){return this._internals.body}set body(e){y.any([g.string,g.buffer,g.nodeStream,g.generator,g.asyncGenerator,te,g.undefined],e),g.nodeStream(e)&&y.truthy(e.readable),void 0!==e&&(y.undefined(this._internals.form),y.undefined(this._internals.json)),this._internals.body=e}get form(){return this._internals.form}set form(e){y.any([g.plainObject,g.undefined],e),void 0!==e&&(y.undefined(this._internals.body),y.undefined(this._internals.json)),this._internals.form=e}get json(){return this._internals.json}set json(e){void 0!==e&&(y.undefined(this._internals.body),y.undefined(this._internals.form)),this._internals.json=e}get url(){return this._internals.url}set url(e){if(y.any([g.string,g.urlInstance,g.undefined],e),void 0===e)return void(this._internals.url=void 0);if(g.string(e)&&e.startsWith("/"))throw new Error("`url` must not start with a slash");const t=`${this.prefixUrl}${e.toString()}`,s=new H.URL(t);if(this._internals.url=s,decodeURI(t),"unix:"===s.protocol&&(s.href=`http://unix${s.pathname}${s.search}`),"http:"!==s.protocol&&"https:"!==s.protocol){const e=new Error(`Unsupported protocol: ${s.protocol}`);throw e.code="ERR_UNSUPPORTED_PROTOCOL",e}if(this._internals.username&&(s.username=this._internals.username,this._internals.username=""),this._internals.password&&(s.password=this._internals.password,this._internals.password=""),this._internals.searchParams&&(s.search=this._internals.searchParams.toString(),this._internals.searchParams=void 0),"unix"!==s.hostname)this._unixOptions=void 0;else{if(!this._internals.enableUnixSockets)throw new Error("Using UNIX domain sockets but option `enableUnixSockets` is not enabled");const e=/(?<socketPath>.+?):(?<path>.+)/.exec(`${s.pathname}${s.search}`);if(e?.groups){const{socketPath:t,path:s}=e.groups;this._unixOptions={socketPath:t,path:s,host:""}}else this._unixOptions=void 0}}get cookieJar(){return this._internals.cookieJar}set cookieJar(e){if(y.any([g.object,g.undefined],e),void 0===e)return void(this._internals.cookieJar=void 0);let{setCookie:t,getCookieString:s}=e;y.function_(t),y.function_(s),4===t.length&&0===s.length?(t=(0,ke.promisify)(t.bind(e)),s=(0,ke.promisify)(s.bind(e)),this._internals.cookieJar={setCookie:t,getCookieString:s}):this._internals.cookieJar=e}get signal(){return this._internals.signal}set signal(e){y.object(e),this._internals.signal=e}get ignoreInvalidCookies(){return this._internals.ignoreInvalidCookies}set ignoreInvalidCookies(e){y.boolean(e),this._internals.ignoreInvalidCookies=e}get searchParams(){return this._internals.url?this._internals.url.searchParams:(void 0===this._internals.searchParams&&(this._internals.searchParams=new H.URLSearchParams),this._internals.searchParams)}set searchParams(e){y.any([g.string,g.object,g.undefined],e);const t=this._internals.url;if(void 0===e)return this._internals.searchParams=void 0,void(t&&(t.search=""));const s=this.searchParams;let r;if(g.string(e))r=new H.URLSearchParams(e);else if(e instanceof H.URLSearchParams)r=e;else{!function(e){for(const t in e){const s=e[t];y.any([g.string,g.number,g.boolean,g.null_,g.undefined],s)}}(e),r=new H.URLSearchParams;for(const t in e){const o=e[t];null===o?r.append(t,""):void 0===o?s.delete(t):r.append(t,o)}}if(this._merging){for(const e of r.keys())s.delete(e);for(const[e,t]of r)s.append(e,t)}else t?t.search=s.toString():this._internals.searchParams=s}get searchParameters(){throw new Error("The `searchParameters` option does not exist. Use `searchParams` instead.")}set searchParameters(e){throw new Error("The `searchParameters` option does not exist. Use `searchParams` instead.")}get dnsLookup(){return this._internals.dnsLookup}set dnsLookup(e){y.any([g.function_,g.undefined],e),this._internals.dnsLookup=e}get dnsCache(){return this._internals.dnsCache}set dnsCache(e){y.any([g.object,g.boolean,g.undefined],e),this._internals.dnsCache=!0===e?st||(st=new Qe,st):!1===e?void 0:e}get context(){return this._internals.context}set context(e){y.object(e),this._merging?Object.assign(this._internals.context,e):this._internals.context={...e}}get hooks(){return this._internals.hooks}set hooks(e){y.object(e);for(const t in e){if(!(t in this._internals.hooks))throw new Error(`Unexpected hook event: ${t}`);const s=t,r=e[s];if(y.any([g.array,g.undefined],r),r)for(const e of r)y.function_(e);if(this._merging)r&&this._internals.hooks[s].push(...r);else{if(!r)throw new Error(`Missing hook event: ${t}`);this._internals.hooks[t]=[...r]}}}get followRedirect(){return this._internals.followRedirect}set followRedirect(e){y.boolean(e),this._internals.followRedirect=e}get followRedirects(){throw new TypeError("The `followRedirects` option does not exist. Use `followRedirect` instead.")}set followRedirects(e){throw new TypeError("The `followRedirects` option does not exist. Use `followRedirect` instead.")}get maxRedirects(){return this._internals.maxRedirects}set maxRedirects(e){y.number(e),this._internals.maxRedirects=e}get cache(){return this._internals.cache}set cache(e){y.any([g.object,g.string,g.boolean,g.undefined],e),this._internals.cache=!0===e?tt:!1===e?void 0:e}get throwHttpErrors(){return this._internals.throwHttpErrors}set throwHttpErrors(e){y.boolean(e),this._internals.throwHttpErrors=e}get username(){const e=this._internals.url,t=e?e.username:this._internals.username;return decodeURIComponent(t)}set username(e){y.string(e);const t=this._internals.url,s=encodeURIComponent(e);t?t.username=s:this._internals.username=s}get password(){const e=this._internals.url,t=e?e.password:this._internals.password;return decodeURIComponent(t)}set password(e){y.string(e);const t=this._internals.url,s=encodeURIComponent(e);t?t.password=s:this._internals.password=s}get http2(){return this._internals.http2}set http2(e){y.boolean(e),this._internals.http2=e}get allowGetBody(){return this._internals.allowGetBody}set allowGetBody(e){y.boolean(e),this._internals.allowGetBody=e}get headers(){return this._internals.headers}set headers(e){y.plainObject(e),this._merging?Object.assign(this._internals.headers,B(e)):this._internals.headers=B(e)}get methodRewriting(){return this._internals.methodRewriting}set methodRewriting(e){y.boolean(e),this._internals.methodRewriting=e}get dnsLookupIpVersion(){return this._internals.dnsLookupIpVersion}set dnsLookupIpVersion(e){if(void 0!==e&&4!==e&&6!==e)throw new TypeError(`Invalid DNS lookup IP version: ${e}`);this._internals.dnsLookupIpVersion=e}get parseJson(){return this._internals.parseJson}set parseJson(e){y.function_(e),this._internals.parseJson=e}get stringifyJson(){return this._internals.stringifyJson}set stringifyJson(e){y.function_(e),this._internals.stringifyJson=e}get retry(){return this._internals.retry}set retry(e){if(y.plainObject(e),y.any([g.function_,g.undefined],e.calculateDelay),y.any([g.number,g.undefined],e.maxRetryAfter),y.any([g.number,g.undefined],e.limit),y.any([g.array,g.undefined],e.methods),y.any([g.array,g.undefined],e.statusCodes),y.any([g.array,g.undefined],e.errorCodes),y.any([g.number,g.undefined],e.noise),e.noise&&Math.abs(e.noise)>100)throw new Error(`The maximum acceptable retry noise is +/- 100ms, got ${e.noise}`);for(const t in e)if(!(t in this._internals.retry))throw new Error(`Unexpected retry option: ${t}`);this._merging?Object.assign(this._internals.retry,e):this._internals.retry={...e};const{retry:t}=this._internals;t.methods=[...new Set(t.methods.map((e=>e.toUpperCase())))],t.statusCodes=[...new Set(t.statusCodes)],t.errorCodes=[...new Set(t.errorCodes)]}get localAddress(){return this._internals.localAddress}set localAddress(e){y.any([g.string,g.undefined],e),this._internals.localAddress=e}get method(){return this._internals.method}set method(e){y.string(e),this._internals.method=e.toUpperCase()}get createConnection(){return this._internals.createConnection}set createConnection(e){y.any([g.function_,g.undefined],e),this._internals.createConnection=e}get cacheOptions(){return this._internals.cacheOptions}set cacheOptions(e){y.plainObject(e),y.any([g.boolean,g.undefined],e.shared),y.any([g.number,g.undefined],e.cacheHeuristic),y.any([g.number,g.undefined],e.immutableMinTimeToLive),y.any([g.boolean,g.undefined],e.ignoreCargoCult);for(const t in e)if(!(t in this._internals.cacheOptions))throw new Error(`Cache option \`${t}\` does not exist`);this._merging?Object.assign(this._internals.cacheOptions,e):this._internals.cacheOptions={...e}}get https(){return this._internals.https}set https(e){y.plainObject(e),y.any([g.boolean,g.undefined],e.rejectUnauthorized),y.any([g.function_,g.undefined],e.checkServerIdentity),y.any([g.string,g.object,g.array,g.undefined],e.certificateAuthority),y.any([g.string,g.object,g.array,g.undefined],e.key),y.any([g.string,g.object,g.array,g.undefined],e.certificate),y.any([g.string,g.undefined],e.passphrase),y.any([g.string,g.buffer,g.array,g.undefined],e.pfx),y.any([g.array,g.undefined],e.alpnProtocols),y.any([g.string,g.undefined],e.ciphers),y.any([g.string,g.buffer,g.undefined],e.dhparam),y.any([g.string,g.undefined],e.signatureAlgorithms),y.any([g.string,g.undefined],e.minVersion),y.any([g.string,g.undefined],e.maxVersion),y.any([g.boolean,g.undefined],e.honorCipherOrder),y.any([g.number,g.undefined],e.tlsSessionLifetime),y.any([g.string,g.undefined],e.ecdhCurve),y.any([g.string,g.buffer,g.array,g.undefined],e.certificateRevocationLists);for(const t in e)if(!(t in this._internals.https))throw new Error(`HTTPS option \`${t}\` does not exist`);this._merging?Object.assign(this._internals.https,e):this._internals.https={...e}}get encoding(){return this._internals.encoding}set encoding(e){if(null===e)throw new TypeError("To get a Buffer, set `options.responseType` to `buffer` instead");y.any([g.string,g.undefined],e),this._internals.encoding=e}get resolveBodyOnly(){return this._internals.resolveBodyOnly}set resolveBodyOnly(e){y.boolean(e),this._internals.resolveBodyOnly=e}get isStream(){return this._internals.isStream}set isStream(e){y.boolean(e),this._internals.isStream=e}get responseType(){return this._internals.responseType}set responseType(e){if(void 0!==e){if("text"!==e&&"buffer"!==e&&"json"!==e)throw new Error(`Invalid \`responseType\` option: ${e}`);this._internals.responseType=e}else this._internals.responseType="text"}get pagination(){return this._internals.pagination}set pagination(e){y.object(e),this._merging?Object.assign(this._internals.pagination,e):this._internals.pagination=e}get auth(){throw new Error("Parameter `auth` is deprecated. Use `username` / `password` instead.")}set auth(e){throw new Error("Parameter `auth` is deprecated. Use `username` / `password` instead.")}get setHost(){return this._internals.setHost}set setHost(e){y.boolean(e),this._internals.setHost=e}get maxHeaderSize(){return this._internals.maxHeaderSize}set maxHeaderSize(e){y.any([g.number,g.undefined],e),this._internals.maxHeaderSize=e}get enableUnixSockets(){return this._internals.enableUnixSockets}set enableUnixSockets(e){y.boolean(e),this._internals.enableUnixSockets=e}toJSON(){return{...this._internals}}[Symbol.for("nodejs.util.inspect.custom")](e,t){return(0,ke.inspect)(this._internals,t)}createNativeRequestOptions(){const e=this._internals;let t;t="https:"===e.url.protocol?e.http2?e.agent:e.agent.https:e.agent.http;const{https:s}=e;let{pfx:r}=s;return g.array(r)&&g.plainObject(r[0])&&(r=r.map((e=>({buf:e.buffer,passphrase:e.passphrase})))),{...e.cacheOptions,...this._unixOptions,ALPNProtocols:s.alpnProtocols,ca:s.certificateAuthority,cert:s.certificate,key:s.key,passphrase:s.passphrase,pfx:s.pfx,rejectUnauthorized:s.rejectUnauthorized,checkServerIdentity:s.checkServerIdentity??qe.checkServerIdentity,ciphers:s.ciphers,honorCipherOrder:s.honorCipherOrder,minVersion:s.minVersion,maxVersion:s.maxVersion,sigalgs:s.signatureAlgorithms,sessionTimeout:s.tlsSessionLifetime,dhparam:s.dhparam,ecdhCurve:s.ecdhCurve,crl:s.certificateRevocationLists,lookup:e.dnsLookup??e.dnsCache?.lookup,family:e.dnsLookupIpVersion,agent:t,setHost:e.setHost,method:e.method,maxHeaderSize:e.maxHeaderSize,localAddress:e.localAddress,headers:e.headers,createConnection:e.createConnection,timeout:e.http2?ot(e):void 0,h2session:e.h2session}}getRequestFunction(){const e=this._internals.url,{request:t}=this._internals;return!t&&e?this.getFallbackRequestFunction():t}getFallbackRequestFunction(){const e=this._internals.url;if(e){if("https:"===e.protocol){if(this._internals.http2){if(Ze<15||15===Ze&&et<10){const e=new Error("To use the `http2` option, install Node.js 15.10.0 or above");throw e.code="EUNSUPPORTED",e}return Ye.auto}return Ie.request}return q.request}}freeze(){const e=this._internals;Object.freeze(e),Object.freeze(e.hooks),Object.freeze(e.hooks.afterResponse),Object.freeze(e.hooks.beforeError),Object.freeze(e.hooks.beforeRedirect),Object.freeze(e.hooks.beforeRequest),Object.freeze(e.hooks.beforeRetry),Object.freeze(e.hooks.init),Object.freeze(e.https),Object.freeze(e.cacheOptions),Object.freeze(e.agent),Object.freeze(e.headers),Object.freeze(e.timeout),Object.freeze(e.retry),Object.freeze(e.retry.errorCodes),Object.freeze(e.retry.methods),Object.freeze(e.retry.statusCodes)}}const at=e=>{const{statusCode:t}=e,s=e.request.options.followRedirect?299:399;return t>=200&&t<=s||304===t};class ct extends v{constructor(e,t){const{options:s}=t.request;super(`${e.message} in "${s.url.toString()}"`,e,t.request),this.name="ParseError",this.code="ERR_BODY_PARSE_FAILURE"}}const ht=(e,t,s,r)=>{const{rawBody:o}=e;try{if("text"===t)return o.toString(r);if("json"===t)return 0===o.length?"":s(o.toString(r));if("buffer"===t)return o}catch(t){throw new ct(t,e)}throw new ct({message:`Unknown body type '${t}'`,name:"Error"},e)};function lt(e){return"unix:"===e.protocol||"unix"===e.hostname}const ut=g.string(R.versions.brotli),dt=new Set(["GET","HEAD"]),pt=new class{constructor(){Object.defineProperty(this,"weakMap",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"map",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.weakMap=new WeakMap,this.map=new Map}set(e,t){"object"==typeof e?this.weakMap.set(e,t):this.map.set(e,t)}get(e){return"object"==typeof e?this.weakMap.get(e):this.map.get(e)}has(e){return"object"==typeof e?this.weakMap.has(e):this.map.has(e)}},ft=new Set([300,301,302,303,304,307,308]),mt=["socket","connect","continue","information","upgrade"],yt=()=>{};class gt extends j.Duplex{constructor(e,t,s){super({autoDestroy:!1,highWaterMark:0}),Object.defineProperty(this,"constructor",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_noPipe",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"options",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"response",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"requestUrl",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"redirectUrls",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"retryCount",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_stopRetry",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_downloadedSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_uploadedSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_stopReading",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_pipedServerResponses",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_request",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_responseSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_bodySize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_unproxyEvents",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_isFromCache",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_cannotHaveBody",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_triggerRead",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_cancelTimeouts",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_removeListeners",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_nativeResponse",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_flushed",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_aborted",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_requestInitialized",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this._downloadedSize=0,this._uploadedSize=0,this._stopReading=!1,this._pipedServerResponses=new Set,this._cannotHaveBody=!1,this._unproxyEvents=yt,this._triggerRead=!1,this._cancelTimeouts=yt,this._removeListeners=yt,this._jobs=[],this._flushed=!1,this._requestInitialized=!1,this._aborted=!1,this.redirectUrls=[],this.retryCount=0,this._stopRetry=yt,this.on("pipe",(e=>{e.headers&&Object.assign(this.options.headers,e.headers)})),this.on("newListener",(e=>{if("retry"===e&&this.listenerCount("retry")>0)throw new Error("A retry listener has been attached already.")}));try{if(this.options=new it(e,t,s),!this.options.url){if(""===this.options.prefixUrl)throw new TypeError("Missing `url` property");this.options.url=""}this.requestUrl=this.options.url}catch(e){const{options:t}=e;return t&&(this.options=t),void(this.flush=async()=>{this.flush=async()=>{},this.destroy(e)})}const{body:r}=this.options;if(g.nodeStream(r)&&r.once("error",(e=>{this._flushed?this._beforeError(new O(e,this)):this.flush=async()=>{this.flush=async()=>{},this._beforeError(new O(e,this))}})),this.options.signal){const e=()=>{this.destroy(new C(this))};this.options.signal.aborted?e():(this.options.signal.addEventListener("abort",e),this._removeListeners=()=>{this.options.signal.removeEventListener("abort",e)})}}async flush(){if(!this._flushed){this._flushed=!0;try{if(await this._finalizeBody(),this.destroyed)return;if(await this._makeRequest(),this.destroyed)return void this._request?.destroy();for(const e of this._jobs)e();this._jobs.length=0,this._requestInitialized=!0}catch(e){this._beforeError(e)}}}_beforeError(e){if(this._stopReading)return;const{response:t,options:s}=this,r=this.retryCount+("RetryError"===e.name?0:1);this._stopReading=!0,e instanceof v||(e=new v(e.message,e,this));const o=e;(async()=>{if(!t?.readable||t.rawBody||this._request?.socket?.destroyed||(t.setEncoding(this.readableEncoding),await this._setRawBody(t)&&(t.body=t.rawBody.toString())),0!==this.listenerCount("retry")){let n;try{let e;t&&"retry-after"in t.headers&&(e=Number(t.headers["retry-after"]),Number.isNaN(e)?(e=Date.parse(t.headers["retry-after"])-Date.now(),e<=0&&(e=1)):e*=1e3);const i=s.retry;n=await i.calculateDelay({attemptCount:r,retryOptions:i,error:o,retryAfter:e,computedValue:He({attemptCount:r,retryOptions:i,error:o,retryAfter:e,computedValue:i.maxRetryAfter??s.timeout.request??Number.POSITIVE_INFINITY})})}catch(e){return void this._error(new v(e.message,e,this))}if(n){if(await new Promise((e=>{const t=setTimeout(e,n);this._stopRetry=()=>{clearTimeout(t),e()}})),this.destroyed)return;try{for(const e of this.options.hooks.beforeRetry)await e(o,this.retryCount+1)}catch(t){return void this._error(new v(t.message,e,this))}if(this.destroyed)return;return this.destroy(),void this.emit("retry",this.retryCount+1,e,(e=>{const t=new gt(s.url,e,s);return t.retryCount=this.retryCount+1,R.nextTick((()=>{t.flush()})),t}))}}this._error(o)})()}_read(){this._triggerRead=!0;const{response:e}=this;if(e&&!this._stopReading){let t;for(e.readableLength&&(this._triggerRead=!1);null!==(t=e.read());){this._downloadedSize+=t.length;const e=this.downloadProgress;e.percent<1&&this.emit("downloadProgress",e),this.push(t)}}}_write(e,t,s){const r=()=>{this._writeRequest(e,t,s)};this._requestInitialized?r():this._jobs.push(r)}_final(e){const t=()=>{this._request&&!this._request.destroyed?this._request.end((t=>{this._request._writableState?.errored||(t||(this._bodySize=this._uploadedSize,this.emit("uploadProgress",this.uploadProgress),this._request.emit("upload-complete")),e(t))})):e()};this._requestInitialized?t():this._jobs.push(t)}_destroy(e,t){if(this._stopReading=!0,this.flush=async()=>{},this._stopRetry(),this._cancelTimeouts(),this._removeListeners(),this.options){const{body:e}=this.options;g.nodeStream(e)&&e.destroy()}this._request&&this._request.destroy(),null===e||g.undefined(e)||e instanceof v||(e=new v(e.message,e,this)),t(e)}pipe(e,t){return e instanceof q.ServerResponse&&this._pipedServerResponses.add(e),super.pipe(e,t)}unpipe(e){return e instanceof q.ServerResponse&&this._pipedServerResponses.delete(e),super.unpipe(e),this}async _finalizeBody(){const{options:e}=this,{headers:t}=e,s=!g.undefined(e.form),r=!g.undefined(e.json),o=!g.undefined(e.body),n=dt.has(e.method)&&!("GET"===e.method&&e.allowGetBody);if(this._cannotHaveBody=n,s||r||o){if(n)throw new TypeError(`The \`${e.method}\` method cannot be used with a body`);const r=!g.string(t["content-type"]);if(o){if(te(e.body)){const s=new Oe(e.body);r&&(t["content-type"]=s.headers["Content-Type"]),"Content-Length"in s.headers&&(t["content-length"]=s.headers["Content-Length"]),e.body=s.encode()}Te(e.body)&&r&&(t["content-type"]=`multipart/form-data; boundary=${e.body.getBoundary()}`)}else if(s){r&&(t["content-type"]="application/x-www-form-urlencoded");const{form:s}=e;e.form=void 0,e.body=new H.URLSearchParams(s).toString()}else{r&&(t["content-type"]="application/json");const{json:s}=e;e.json=void 0,e.body=e.stringifyJson(s)}const i=await async function(e,t){return t&&"content-length"in t?Number(t["content-length"]):e?g.string(e)?A.Buffer.byteLength(e):g.buffer(e)?e.length:Te(e)?(0,ke.promisify)(e.getLength.bind(e))():void 0:0}(e.body,e.headers);g.undefined(t["content-length"])&&g.undefined(t["transfer-encoding"])&&!n&&!g.undefined(i)&&(t["content-length"]=String(i))}"json"!==e.responseType||"accept"in e.headers||(e.headers.accept="application/json"),this._bodySize=Number(t["content-length"])||void 0}async _onResponseBase(e){if(this.isAborted)return;const{options:t}=this,{url:s}=t;this._nativeResponse=e,t.decompress&&(e=Z(e));const r=e.statusCode,o=e;o.statusMessage=o.statusMessage?o.statusMessage:q.STATUS_CODES[r],o.url=t.url.toString(),o.requestUrl=this.requestUrl,o.redirectUrls=this.redirectUrls,o.request=this,o.isFromCache=this._nativeResponse.fromCache??!1,o.ip=this.ip,o.retryCount=this.retryCount,o.ok=at(o),this._isFromCache=o.isFromCache,this._responseSize=Number(e.headers["content-length"])||void 0,this.response=o,e.once("end",(()=>{this._responseSize=this._downloadedSize,this.emit("downloadProgress",this.downloadProgress)})),e.once("error",(t=>{this._aborted=!0,e.destroy(),this._beforeError(new T(t,this))})),e.once("aborted",(()=>{this._aborted=!0,this._beforeError(new T({name:"Error",message:"The server aborted pending request",code:"ECONNRESET"},this))})),this.emit("downloadProgress",this.downloadProgress);const n=e.headers["set-cookie"];if(g.object(t.cookieJar)&&n){let e=n.map((async e=>t.cookieJar.setCookie(e,s.toString())));t.ignoreInvalidCookies&&(e=e.map((async e=>{try{await e}catch{}})));try{await Promise.all(e)}catch(e){return void this._beforeError(e)}}if(!this.isAborted)if(t.followRedirect&&e.headers.location&&ft.has(r)){if(e.resume(),this._cancelTimeouts(),this._unproxyEvents(),this.redirectUrls.length>=t.maxRedirects)return void this._beforeError(new E(this));this._request=void 0;const n=new it(void 0,void 0,this.options),i=303===r&&"GET"!==n.method&&"HEAD"!==n.method,a=307!==r&&308!==r,c=n.methodRewriting&&a;(i||c)&&(n.method="GET",n.body=void 0,n.json=void 0,n.form=void 0,delete n.headers["content-length"]);try{const t=A.Buffer.from(e.headers.location,"binary").toString(),r=new H.URL(t,s);if(!lt(s)&&lt(r))return void this._beforeError(new v("Cannot redirect to UNIX socket",{},this));r.hostname!==s.hostname||r.port!==s.port?("host"in n.headers&&delete n.headers.host,"cookie"in n.headers&&delete n.headers.cookie,"authorization"in n.headers&&delete n.headers.authorization,(n.username||n.password)&&(n.username="",n.password="")):(r.username=n.username,r.password=n.password),this.redirectUrls.push(r),n.prefixUrl="",n.url=r;for(const e of n.hooks.beforeRedirect)await e(n,o);this.emit("redirect",n,o),this.options=n,await this._makeRequest()}catch(e){return void this._beforeError(e)}}else if(t.isStream&&t.throwHttpErrors&&!at(o))this._beforeError(new S(o));else if(e.on("readable",(()=>{this._triggerRead&&this._read()})),this.on("resume",(()=>{e.resume()})),this.on("pause",(()=>{e.pause()})),e.once("end",(()=>{this.push(null)})),this._noPipe)await this._setRawBody()&&this.emit("response",e);else{this.emit("response",e);for(const s of this._pipedServerResponses)if(!s.headersSent){for(const r in e.headers){const o=!t.decompress||"content-encoding"!==r,n=e.headers[r];o&&s.setHeader(r,n)}s.statusCode=r}}}async _setRawBody(e=this){if(e.readableEnded)return!1;try{const t=await(0,D.buffer)(e);if(!this.isAborted)return this.response.rawBody=t,!0}catch{}return!1}async _onResponse(e){try{await this._onResponseBase(e)}catch(e){this._beforeError(e)}}_onRequest(e){const{options:t}=this,{timeout:s,url:r}=t;(e=>{if(e.timings)return e.timings;const t={start:Date.now(),socket:void 0,lookup:void 0,connect:void 0,secureConnect:void 0,upload:void 0,response:void 0,end:void 0,error:void 0,abort:void 0,phases:{wait:void 0,dns:void 0,tcp:void 0,tls:void 0,request:void 0,firstByte:void 0,download:void 0,total:void 0}};e.timings=t;const s=e=>{e.once(I.errorMonitor,(()=>{t.error=Date.now(),t.phases.total=t.error-t.start}))};s(e);const r=()=>{t.abort=Date.now(),t.phases.total=t.abort-t.start};e.prependOnceListener("abort",r);const o=e=>{if(t.socket=Date.now(),t.phases.wait=t.socket-t.start,L.types.isProxy(e))return;const s=()=>{t.lookup=Date.now(),t.phases.dns=t.lookup-t.socket};e.prependOnceListener("lookup",s),N(e,{connect:()=>{t.connect=Date.now(),void 0===t.lookup&&(e.removeListener("lookup",s),t.lookup=t.connect,t.phases.dns=t.lookup-t.socket),t.phases.tcp=t.connect-t.lookup},secureConnect:()=>{t.secureConnect=Date.now(),t.phases.tls=t.secureConnect-t.connect}})};e.socket?o(e.socket):e.prependOnceListener("socket",o);const n=()=>{t.upload=Date.now(),t.phases.request=t.upload-(t.secureConnect??t.connect)};e.writableFinished?n():e.prependOnceListener("finish",n),e.prependOnceListener("response",(o=>{t.response=Date.now(),t.phases.firstByte=t.response-t.upload,o.timings=t,s(o),o.prependOnceListener("end",(()=>{e.off("abort",r),o.off("aborted",r),t.phases.total||(t.end=Date.now(),t.phases.download=t.end-t.response,t.phases.total=t.end-t.start)})),o.prependOnceListener("aborted",r)}))})(e),this.options.http2&&e.setTimeout(0),this._cancelTimeouts=function(e,t,s){if(Re in e)return Ae;e[Re]=!0;const r=[],{once:o,unhandleAll:n}=function(){const e=[];return{once(t,s,r){t.once(s,r),e.push({origin:t,event:s,fn:r})},unhandleAll(){for(const t of e){const{origin:e,event:s,fn:r}=t;e.removeListener(s,r)}e.length=0}}}(),i=(e,t,s)=>{const o=setTimeout(t,e,e,s);o.unref?.();const n=()=>{clearTimeout(o)};return r.push(n),n},{host:a,hostname:c}=s,h=(t,s)=>{e.destroy(new je(t,s))},l=()=>{for(const e of r)e();n()};if(e.once("error",(t=>{if(l(),0===e.listenerCount("error"))throw t})),void 0!==t.request){const s=i(t.request,h,"request");o(e,"response",(e=>{o(e,"end",s)}))}if(void 0!==t.socket){const{socket:s}=t,o=()=>{h(s,"socket")};e.setTimeout(s,o),r.push((()=>{e.removeListener("timeout",o)}))}const u=void 0!==t.lookup,d=void 0!==t.connect,p=void 0!==t.secureConnect,f=void 0!==t.send;return(u||d||p||f)&&o(e,"socket",(r=>{const{socketPath:n}=e;if(r.connecting){const e=Boolean(n??0!==Ce.isIP(c??a??""));if(u&&!e&&void 0===r.address().address){const e=i(t.lookup,h,"lookup");o(r,"lookup",e)}if(d){const s=()=>i(t.connect,h,"connect");e?o(r,"connect",s()):o(r,"lookup",(e=>{null===e&&o(r,"connect",s())}))}p&&"https:"===s.protocol&&o(r,"connect",(()=>{const e=i(t.secureConnect,h,"secureConnect");o(r,"secureConnect",e)}))}if(f){const s=()=>i(t.send,h,"send");r.connecting?o(r,"connect",(()=>{o(e,"upload-complete",s())})):o(e,"upload-complete",s())}})),void 0!==t.response&&o(e,"upload-complete",(()=>{const s=i(t.response,h,"response");o(e,"response",s)})),void 0!==t.read&&o(e,"response",(e=>{const s=i(t.read,h,"read");o(e,"end",s)})),l}(e,s,r);const o=t.cache?"cacheableResponse":"response";e.once(o,(e=>{this._onResponse(e)})),e.once("error",(t=>{this._aborted=!0,e.destroy(),t=t instanceof je?new k(t,this.timings,this):new v(t.message,t,this),this._beforeError(t)})),this._unproxyEvents=Pe(e,this,mt),this._request=e,this.emit("uploadProgress",this.uploadProgress),this._sendBody(),this.emit("request",e)}async _asyncWrite(e){return new Promise(((t,s)=>{super.write(e,(e=>{e?s(e):t()}))}))}_sendBody(){const{body:e}=this.options,t=0===this.redirectUrls.length?this:this._request??this;g.nodeStream(e)?e.pipe(t):g.generator(e)||g.asyncGenerator(e)?(async()=>{try{for await(const t of e)await this._asyncWrite(t);super.end()}catch(e){this._beforeError(e)}})():g.undefined(e)?(this._cannotHaveBody||this._noPipe)&&t.end():(this._writeRequest(e,void 0,(()=>{})),t.end())}_prepareCache(e){if(!pt.has(e)){const t=new class{constructor(e,t){this.hooks=new Map,this.request=()=>(e,t)=>{let s;if("string"==typeof e)s=Y(H.parse(e)),e={};else if(e instanceof H.URL)s=Y(H.parse(e.toString())),e={};else{const[t,...r]=(e.path??"").split("?"),o=r.length>0?`?${r.join("?")}`:"";s=Y({...e,pathname:t,search:o})}(e={headers:{},method:"GET",cache:!0,strictTtl:!1,automaticFailover:!1,...e,...Q(s)}).headers=Object.fromEntries(K(e.headers).map((([e,t])=>[e.toLowerCase(),t])));const r=new b,o=function(e,t){if("string"!=typeof(t={defaultProtocol:"http",normalizeProtocol:!0,forceHttp:!1,forceHttps:!1,stripAuthentication:!0,stripHash:!1,stripTextFragment:!0,stripWWW:!0,removeQueryParameters:[/^utm_\w+/i],removeTrailingSlash:!0,removeSingleSlash:!0,removeDirectoryIndex:!1,removeExplicitPort:!1,sortQueryParameters:!0,...t}).defaultProtocol||t.defaultProtocol.endsWith(":")||(t.defaultProtocol=`${t.defaultProtocol}:`),e=e.trim(),/^data:/i.test(e))return((e,{stripHash:t})=>{const s=/^data:(?<type>[^,]*?),(?<data>[^#]*?)(?:#(?<hash>.*))?$/.exec(e);if(!s)throw new Error(`Invalid URL: ${e}`);let{type:r,data:o,hash:n}=s.groups;const i=r.split(";");n=t?"":n;let a=!1;"base64"===i[i.length-1]&&(i.pop(),a=!0);const c=i.shift()?.toLowerCase()??"",h=[...i.map((e=>{let[t,s=""]=e.split("=").map((e=>e.trim()));return"charset"===t&&(s=s.toLowerCase(),"us-ascii"===s)?"":`${t}${s?`=${s}`:""}`})).filter(Boolean)];return a&&h.push("base64"),(h.length>0||c&&"text/plain"!==c)&&h.unshift(c),`data:${h.join(";")},${a?o.trim():o}${n?`#${n}`:""}`})(e,t);if((e=>{try{const{protocol:t}=new URL(e);return t.endsWith(":")&&!z.has(t)}catch{return!1}})(e))return e;const s=e.startsWith("//");!s&&/^\.*\//.test(e)||(e=e.replace(/^(?!(?:\w+:)?\/\/)|^\/\//,t.defaultProtocol));const r=new URL(e);if(t.forceHttp&&t.forceHttps)throw new Error("The `forceHttp` and `forceHttps` options cannot be used together");if(t.forceHttp&&"https:"===r.protocol&&(r.protocol="http:"),t.forceHttps&&"http:"===r.protocol&&(r.protocol="https:"),t.stripAuthentication&&(r.username="",r.password=""),t.stripHash?r.hash="":t.stripTextFragment&&(r.hash=r.hash.replace(/#?:~:text.*?$/i,"")),r.pathname){const e=/\b[a-z][a-z\d+\-.]{1,50}:\/\//g;let t=0,s="";for(;;){const o=e.exec(r.pathname);if(!o)break;const n=o[0],i=o.index;s+=r.pathname.slice(t,i).replace(/\/{2,}/g,"/"),s+=n,t=i+n.length}s+=r.pathname.slice(t,r.pathname.length).replace(/\/{2,}/g,"/"),r.pathname=s}if(r.pathname)try{r.pathname=decodeURI(r.pathname)}catch{}if(!0===t.removeDirectoryIndex&&(t.removeDirectoryIndex=[/^index\.[a-z]+$/]),Array.isArray(t.removeDirectoryIndex)&&t.removeDirectoryIndex.length>0){let e=r.pathname.split("/");const s=e[e.length-1];$(s,t.removeDirectoryIndex)&&(e=e.slice(0,-1),r.pathname=e.slice(1).join("/")+"/")}if(r.hostname&&(r.hostname=r.hostname.replace(/\.$/,""),t.stripWWW&&/^www\.(?!www\.)[a-z\-\d]{1,63}\.[a-z.\-\d]{2,63}$/.test(r.hostname)&&(r.hostname=r.hostname.replace(/^www\./,""))),Array.isArray(t.removeQueryParameters))for(const e of[...r.searchParams.keys()])$(e,t.removeQueryParameters)&&r.searchParams.delete(e);if(Array.isArray(t.keepQueryParameters)||!0!==t.removeQueryParameters||(r.search=""),Array.isArray(t.keepQueryParameters)&&t.keepQueryParameters.length>0)for(const e of[...r.searchParams.keys()])$(e,t.keepQueryParameters)||r.searchParams.delete(e);if(t.sortQueryParameters){r.searchParams.sort();try{r.search=decodeURIComponent(r.search)}catch{}}t.removeTrailingSlash&&(r.pathname=r.pathname.replace(/\/$/,"")),t.removeExplicitPort&&r.port&&(r.port="");const o=e;return e=r.toString(),t.removeSingleSlash||"/"!==r.pathname||o.endsWith("/")||""!==r.hash||(e=e.replace(/\/$/,"")),(t.removeTrailingSlash||"/"===r.pathname)&&""===r.hash&&t.removeSingleSlash&&(e=e.replace(/\/$/,"")),s&&!t.normalizeProtocol&&(e=e.replace(/^http:\/\//,"//")),t.stripProtocol&&(e=e.replace(/^(?:https?:)?\/\//,"")),e}(H.format(s),{stripWWW:!1,removeTrailingSlash:!1,stripAuthentication:!1});let n=`${e.method}:${o}`;e.body&&void 0!==e.method&&["POST","PATCH","PUT"].includes(e.method)&&(e.body instanceof j.Readable?e.cache=!1:n+=`:${U.createHash("md5").update(e.body).digest("hex")}`);let i=!1,a=!1;const c=e=>{a=!0;let s=!1,o=()=>{};const c=new Promise((e=>{o=()=>{s||(s=!0,e())}})),h=async s=>{if(i){s.status=s.statusCode;const t=M.fromObject(i.cachePolicy).revalidatedPolicy(e,s);if(!t.modified){s.resume(),await new Promise((e=>{s.once("end",e)}));const e=X(t.policy.responseHeaders());(s=new F({statusCode:i.statusCode,headers:e,body:i.body,url:i.url})).cachePolicy=t.policy,s.fromCache=!0}}let o;s.fromCache||(s.cachePolicy=new M(e,s,e),s.fromCache=!1),e.cache&&s.cachePolicy.storable()?(o=(e=>{const t=new j.PassThrough({autoDestroy:!1});return function(e,t){if(t._readableState.autoDestroy)throw new Error("The second stream must have the `autoDestroy` option set to `false`");const s=new Set([...Object.keys(e),...V]),r={};for(const o of s)o in t||(r[o]={get(){const t=e[o];return"function"==typeof t?t.bind(e):t},set(t){e[o]=t},enumerable:!0,configurable:!1});Object.defineProperties(t,r),e.once("aborted",(()=>{t.destroy(),t.emit("aborted")})),e.once("close",(()=>{e.complete&&t.readable?t.once("end",(()=>{t.emit("close")})):t.emit("close")}))}(e,t),e.pipe(t)})(s),(async()=>{try{const t=D.buffer(s);await Promise.race([c,new Promise((e=>s.once("end",e))),new Promise((e=>s.once("close",e)))]);const r=await t;let o={url:s.url,statusCode:s.fromCache?i.statusCode:s.statusCode,body:r,cachePolicy:s.cachePolicy.toObject()},a=e.strictTtl?s.cachePolicy.timeToLive():void 0;if(e.maxTtl&&(a=a?Math.min(a,e.maxTtl):e.maxTtl),this.hooks.size>0)for(const e of this.hooks.keys())o=await this.runHook(e,o,s);await this.cache.set(n,o,a)}catch(e){r.emit("error",new J(e))}})()):e.cache&&i&&(async()=>{try{await this.cache.delete(n)}catch(e){r.emit("error",new J(e))}})(),r.emit("response",o??s),"function"==typeof t&&t(o??s)};try{const t=this.cacheRequest(e,h);t.once("error",o),t.once("abort",o),t.once("destroy",o),r.emit("request",t)}catch(e){r.emit("error",new G(e))}};return(async()=>{const s=async e=>{await Promise.resolve();const s=e.cache?await this.cache.get(n):void 0;if(void 0===s&&!e.forceRefresh)return void c(e);const o=M.fromObject(s.cachePolicy);if(o.satisfiesWithoutRevalidation(e)&&!e.forceRefresh){const e=X(o.responseHeaders()),n=new F({statusCode:s.statusCode,headers:e,body:s.body,url:s.url});n.cachePolicy=o,n.fromCache=!0,r.emit("response",n),"function"==typeof t&&t(n)}else o.satisfiesWithoutRevalidation(e)&&Date.now()>=o.timeToLive()&&e.forceRefresh?(await this.cache.delete(n),e.headers=o.revalidationHeaders(e),c(e)):(i=s,e.headers=o.revalidationHeaders(e),c(e))},o=e=>r.emit("error",new J(e));if(this.cache instanceof W){const e=this.cache;e.once("error",o),r.on("error",(()=>e.removeListener("error",o))),r.on("response",(()=>e.removeListener("error",o)))}try{await s(e)}catch(t){e.automaticFailover&&!a&&c(e),r.emit("error",new J(t))}})(),r},this.addHook=(e,t)=>{this.hooks.has(e)||this.hooks.set(e,t)},this.removeHook=e=>this.hooks.delete(e),this.getHook=e=>this.hooks.get(e),this.runHook=async(e,...t)=>this.hooks.get(e)?.(...t),this.cache=t instanceof W?t:new W("string"==typeof t?{uri:t,namespace:"cacheable-request"}:{store:t,namespace:"cacheable-request"}),this.request=this.request.bind(this),this.cacheRequest=e}}(((e,t)=>{const s=e._request(e,t);return g.promise(s)&&(s.once=(e,t)=>{if("error"===e)(async()=>{try{await s}catch(e){t(e)}})();else{if("abort"!==e)throw new Error(`Unknown HTTP2 promise event: ${e}`);(async()=>{try{(await s).once("abort",t)}catch{}})()}return s}),s}),e);pt.set(e,t.request())}}async _createCacheableRequest(e,t){return new Promise(((s,r)=>{let o;Object.assign(t,function(e){const t={protocol:e.protocol,hostname:g.string(e.hostname)&&e.hostname.startsWith("[")?e.hostname.slice(1,-1):e.hostname,host:e.host,hash:e.hash,search:e.search,pathname:e.pathname,href:e.href,path:`${e.pathname||""}${e.search||""}`};return g.string(e.port)&&e.port.length>0&&(t.port=Number(e.port)),(e.username||e.password)&&(t.auth=`${e.username||""}:${e.password||""}`),t}(e));const n=pt.get(t.cache)(t,(async e=>{if(e._readableState.autoDestroy=!1,o){const t=()=>{e.req&&(e.complete=e.req.res.complete)};e.prependOnceListener("end",t),t(),(await o).emit("cacheableResponse",e)}s(e)}));n.once("error",r),n.once("request",(async e=>{o=e,s(o)}))}))}async _makeRequest(){const{options:e}=this,{headers:t,username:s,password:r}=e,o=e.cookieJar;for(const e in t)if(g.undefined(t[e]))delete t[e];else if(g.null_(t[e]))throw new TypeError(`Use \`undefined\` instead of \`null\` to delete the \`${e}\` header`);if(e.decompress&&g.undefined(t["accept-encoding"])&&(t["accept-encoding"]=ut?"gzip, deflate, br":"gzip, deflate"),s||r){const e=A.Buffer.from(`${s}:${r}`).toString("base64");t.authorization=`Basic ${e}`}if(o){const s=await o.getCookieString(e.url.toString());g.nonEmptyString(s)&&(t.cookie=s)}let n;e.prefixUrl="";for(const t of e.hooks.beforeRequest){const s=await t(e);if(!g.undefined(s)){n=()=>s;break}}n||(n=e.getRequestFunction());const i=e.url;this._requestOptions=e.createNativeRequestOptions(),e.cache&&(this._requestOptions._request=n,this._requestOptions.cache=e.cache,this._requestOptions.body=e.body,this._prepareCache(e.cache));const a=e.cache?this._createCacheableRequest:n;try{let t=a(i,this._requestOptions);g.promise(t)&&(t=await t),g.undefined(t)&&(t=e.getFallbackRequestFunction()(i,this._requestOptions),g.promise(t)&&(t=await t)),(c=t).writable&&!c.writableEnded?this._onRequest(t):this.writable?(this.once("finish",(()=>{this._onResponse(t)})),this._sendBody()):this._onResponse(t)}catch(e){if(e instanceof J)throw new x(e,this);throw e}var c}async _error(e){try{if(e instanceof S&&!this.options.throwHttpErrors);else for(const t of this.options.hooks.beforeError)e=await t(e)}catch(t){e=new v(t.message,t,this)}this.destroy(e)}_writeRequest(e,t,s){this._request&&!this._request.destroyed&&this._request.write(e,t,(r=>{if(!r&&!this._request.destroyed){this._uploadedSize+=A.Buffer.byteLength(e,t);const s=this.uploadProgress;s.percent<1&&this.emit("uploadProgress",s)}s(r)}))}get ip(){return this.socket?.remoteAddress}get isAborted(){return this._aborted}get socket(){return this._request?.socket??void 0}get downloadProgress(){let e;return e=this._responseSize?this._downloadedSize/this._responseSize:this._responseSize===this._downloadedSize?1:0,{percent:e,transferred:this._downloadedSize,total:this._responseSize}}get uploadProgress(){let e;return e=this._bodySize?this._uploadedSize/this._bodySize:this._bodySize===this._uploadedSize?1:0,{percent:e,transferred:this._uploadedSize,total:this._bodySize}}get timings(){return this._request?.timings}get isFromCache(){return this._isFromCache}get reusedSocket(){return this._request?.reusedSocket}}class bt extends v{constructor(e){super("Promise was canceled",{},e),this.name="CancelError",this.code="ERR_CANCELED"}get isCanceled(){return!0}}const _t=["request","response","redirect","uploadProgress","downloadProgress"];function wt(e){let t,s,r;const o=new b.EventEmitter,n=new w(((i,a,c)=>{c((()=>{t.destroy()})),c.shouldReject=!1,c((()=>{a(new bt(t))}));const h=l=>{c((()=>{}));const u=e??new gt(void 0,void 0,r);u.retryCount=l,u._noPipe=!0,t=u,u.once("response",(async e=>{const t=(e.headers["content-encoding"]??"").toLowerCase(),r="gzip"===t||"deflate"===t||"br"===t,{options:o}=u;if(r&&!o.decompress)e.body=e.rawBody;else try{e.body=ht(e,o.responseType,o.parseJson,o.encoding)}catch(t){if(e.body=e.rawBody.toString(),at(e))return void u._beforeError(t)}try{const t=o.hooks.afterResponse;for(const[s,r]of t.entries())if(e=await r(e,(async e=>{throw o.merge(e),o.prefixUrl="",e.url&&(o.url=e.url),o.hooks.afterResponse=o.hooks.afterResponse.slice(0,s),new P(u)})),!g.object(e)||!g.number(e.statusCode)||g.nullOrUndefined(e.body))throw new TypeError("The `afterResponse` hook returned an invalid value")}catch(e){return void u._beforeError(e)}s=e,at(e)?(u.destroy(),i(u.options.resolveBodyOnly?e.body:e)):u._beforeError(new S(e))}));const d=e=>{if(n.isCanceled)return;const{options:t}=u;if(e instanceof S&&!t.throwHttpErrors){const{response:t}=e;return u.destroy(),void i(u.options.resolveBodyOnly?t.body:t)}a(e)};u.once("error",d);const p=u.options?.body;u.once("retry",((t,s)=>{e=void 0;const o=u.options.body;if(p===o&&g.nodeStream(o))return s.message="Cannot retry with consumed body stream",void d(s);r=u.options,h(t)})),Pe(u,o,_t),g.undefined(e)&&u.flush()};h(0)}));n.on=(e,t)=>(o.on(e,t),n),n.off=(e,t)=>(o.off(e,t),n);const i=e=>{const t=(async()=>{await n;const{options:t}=s.request;return ht(s,e,t.parseJson,t.encoding)})();return Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)),t};return n.json=()=>{if(t.options){const{headers:e}=t.options;t.writableFinished||"accept"in e||(e.accept="application/json")}return i("json")},n.buffer=()=>i("buffer"),n.text=()=>i("text"),n}const vt=async e=>new Promise((t=>{setTimeout(t,e)})),Et=e=>g.function_(e),St=["get","post","put","patch","head","delete"],xt=e=>{e={options:new it(void 0,void 0,e.options),handlers:[...e.handlers],mutableDefaults:e.mutableDefaults},Object.defineProperty(e,"mutableDefaults",{enumerable:!0,configurable:!1,writable:!1});const t=(t,s,r=e.options)=>{const o=new gt(t,s,r);let n;const i=e=>(o.options=e,o._noPipe=!e.isStream,o.flush(),e.isStream?o:(n||(n=wt(o)),n));let a=0;const c=t=>{const s=(e.handlers[a++]??i)(t,c);if(g.promise(s)&&!o.options.isStream&&(n||(n=wt(o)),s!==n)){const e=Object.getOwnPropertyDescriptors(n);for(const t in e)t in s&&delete e[t];Object.defineProperties(s,e),s.cancel=n.cancel}return s};return c(o.options)};t.extend=(...t)=>{const s=new it(void 0,void 0,e.options),r=[...e.handlers];let o;for(const e of t)Et(e)?(s.merge(e.defaults.options),r.push(...e.defaults.handlers),o=e.defaults.mutableDefaults):(s.merge(e),e.handlers&&r.push(...e.handlers),o=e.mutableDefaults);return xt({options:s,handlers:r,mutableDefaults:Boolean(o)})};const s=async function*(s,r){let o=new it(s,r,e.options);o.resolveBodyOnly=!1;const{pagination:n}=o;y.function_(n.transform),y.function_(n.shouldContinue),y.function_(n.filter),y.function_(n.paginate),y.number(n.countLimit),y.number(n.requestLimit),y.number(n.backoff);const i=[];let{countLimit:a}=n,c=0;for(;c<n.requestLimit;){0!==c&&await vt(n.backoff);const e=await t(void 0,void 0,o),s=await n.transform(e),r=[];y.array(s);for(const e of s)if(n.filter({item:e,currentItems:r,allItems:i})){if(!n.shouldContinue({item:e,currentItems:r,allItems:i}))return;if(yield e,n.stackAllItems&&i.push(e),r.push(e),--a<=0)return}const h=n.paginate({response:e,currentItems:r,allItems:i});if(!1===h)return;h===e.request.options?o=e.request.options:(o.merge(h),y.any([g.urlInstance,g.undefined],h.url),void 0!==h.url&&(o.prefixUrl="",o.url=h.url)),c++}};(t.paginate=s).all=async(e,t)=>{const r=[];for await(const o of s(e,t))r.push(o);return r},t.paginate.each=s,t.stream=(e,s)=>t(e,{...s,isStream:!0});for(const e of St)t[e]=(s,r)=>t(s,{...r,method:e}),t.stream[e]=(s,r)=>t(s,{...r,method:e,isStream:!0});return e.mutableDefaults||(Object.freeze(e.handlers),e.options.freeze()),Object.defineProperty(t,"defaults",{value:e,writable:!1,configurable:!1,enumerable:!0}),t},Ot=xt,kt={options:new it,handlers:[],mutableDefaults:!1},Tt=Ot(kt),Pt=Tt}},t={};function s(r){var o=t[r];if(void 0!==o)return o.exports;var n=t[r]={exports:{}};return e[r](n,n.exports,s),n.exports}s.d=(e,t)=>{for(var r in t)s.o(t,r)&&!s.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},s.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),s.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var r={};(()=>{"use strict";var e=r;Object.defineProperty(e,"__esModule",{value:!0}),e.deactivate=e.activate=void 0;const t=s(496),o=s(414);e.activate=function(e){let s,r="",n=t.window.activeTextEditor,i=t.commands.registerCommand("translation.selected",(()=>{let e={getPlatformAccessInfo:()=>new o.PlatformAccessInfo,replaceText:e=>{s&&(n?.edit((t=>{t.replace(s,e)})),t.window.showInformationMessage("翻译文本 "+r+" => "+e))}};(0,o.translation)(r,e)})),a=t.window.onDidChangeTextEditorSelection((e=>{s=e.selections[0],r=e.textEditor.document.getText(s)}));e.subscriptions.push(i,a)},e.deactivate=function(){}})(),module.exports=r})();